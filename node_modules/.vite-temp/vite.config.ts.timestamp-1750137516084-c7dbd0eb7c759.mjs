var __defProp = Object.defineProperty;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};

// src/services/logger.js
import pino from "file:///home/d/cliprr/cliparr-node/node_modules/pino/pino.js";
var isProd, logger;
var init_logger = __esm({
  "src/services/logger.js"() {
    "use strict";
    isProd = process.env.NODE_ENV === "production";
    logger = pino({
      level: process.env.LOG_LEVEL || (isProd ? "info" : "debug"),
      // in prod we emit raw JSON so log aggregators can parse it;
      // in dev we pretty-print for the console
      transport: isProd ? void 0 : {
        target: "pino-pretty",
        options: {
          colorize: true,
          levelFirst: true,
          translateTime: "SYS:standard",
          ignore: "pid,hostname"
        }
      },
      // automatically serialize Errors (so you get stack traces, etc.)
      serializers: {
        ...pino.stdSerializers,
        err: pino.stdSerializers.err
      },
      // redact any sensitive fields by default
      redact: {
        paths: ["req.headers.authorization", "password"],
        remove: true
      }
    });
  }
});

// src/config/index.js
import path from "path";
import dotenv from "file:///home/d/cliprr/cliparr-node/node_modules/dotenv/lib/main.js";
var __vite_injected_original_dirname, isProd2, config, config_default;
var init_config = __esm({
  "src/config/index.js"() {
    "use strict";
    __vite_injected_original_dirname = "/home/d/cliprr/cliparr-node/src/config";
    dotenv.config();
    isProd2 = process.env.NODE_ENV === "production";
    config = {
      env: process.env.NODE_ENV || "development",
      host: process.env.HOST || "0.0.0.0",
      port: +(process.env.PORT || 8485),
      // Sonarr
      sonarr: {
        apiKey: process.env.SONARR_API_KEY,
        url: process.env.SONARR_URL || "http://localhost:8989"
      },
      // Database
      db: {
        path: process.env.DB_PATH || path.join(__vite_injected_original_dirname, "..", "database", "data", "cliparr.db")
      },
      // WebSocket
      ws: {
        path: process.env.WS_PATH || "/ws",
        heartbeat: +(process.env.WS_PING_MS || 3e4)
      },
      // CORS (used in your cors middleware)
      cors: {
        origin: isProd2 ? process.env.FRONTEND_URL || "https://cliprr.example.com" : "http://localhost:8484",
        methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS"],
        allowedHeaders: ["Content-Type", "Authorization"],
        credentials: true
      }
    };
    if (!config.sonarr.apiKey) {
      throw new Error("Missing ENV var: SONARR_API_KEY");
    }
    config_default = config;
  }
});

// src/config/app.js
var devConfig, prodConfig, isProduction, config2, app_default;
var init_app = __esm({
  "src/config/app.js"() {
    "use strict";
    init_logger();
    devConfig = {
      cors: {
        origin: "http://localhost:8484",
        methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS"],
        headers: ["Content-Type", "Authorization"],
        credentials: true
      }
    };
    prodConfig = {
      cors: {
        origin: "https://cliprr.example.com",
        // This will be updated for production
        methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS"],
        headers: ["Content-Type", "Authorization"],
        credentials: true
      }
    };
    isProduction = process.env.NODE_ENV === "production";
    config2 = isProduction ? prodConfig : devConfig;
    logger.info(`Using ${isProduction ? "production" : "development"} configuration`);
    app_default = config2;
  }
});

// src/middleware/cors.js
function cors(req, res, next) {
  const { cors: corsConfig } = app_default;
  res.header("Access-Control-Allow-Origin", corsConfig.origin);
  res.header("Access-Control-Allow-Methods", corsConfig.methods.join(","));
  res.header("Access-Control-Allow-Headers", corsConfig.headers.join(","));
  res.header("Access-Control-Allow-Credentials", corsConfig.credentials.toString());
  if (req.method === "OPTIONS") {
    return res.sendStatus(200);
  }
  next();
}
var init_cors = __esm({
  "src/middleware/cors.js"() {
    "use strict";
    init_app();
  }
});

// src/routes/health.js
import express from "file:///home/d/cliprr/cliparr-node/node_modules/express/index.js";
var router, health_default;
var init_health = __esm({
  "src/routes/health.js"() {
    "use strict";
    router = express.Router();
    router.get("/status", (req, res) => {
      const logger2 = req.app.get("logger");
      logger2.info("Health check requested");
      res.json({
        status: "healthy",
        timestamp: (/* @__PURE__ */ new Date()).toISOString(),
        database: "connected",
        server: "integrated-backend"
      });
    });
    router.get("/db-test", (req, res) => {
      const db = req.app.get("db");
      const logger2 = req.app.get("logger");
      try {
        const testResult = db.transaction(() => {
          db.prepare("INSERT OR REPLACE INTO settings (key, value) VALUES (?, ?)").run("test_key", "test_value");
          const result = db.prepare("SELECT value FROM settings WHERE key = ?").get("test_key");
          return {
            success: true,
            message: "Database test successful",
            testValue: result?.value,
            timestamp: (/* @__PURE__ */ new Date()).toISOString()
          };
        })();
        res.json(testResult);
      } catch (error) {
        logger2.error("Database test failed:", error);
        res.status(500).json({
          success: false,
          message: "Database test failed",
          error: error.message
        });
      }
    });
    health_default = router;
  }
});

// src/routes/shows.js
import express2 from "file:///home/d/cliprr/cliparr-node/node_modules/express/index.js";
var router2, shows_default;
var init_shows = __esm({
  "src/routes/shows.js"() {
    "use strict";
    router2 = express2.Router();
    router2.get("/", (req, res) => {
      const db = req.app.get("db");
      const logger2 = req.app.get("logger");
      try {
        logger2.info("Fetching all shows (no pagination)");
        const query = `
      SELECT 
        s.id, 
        s.title, 
        s.path, 
        s.sonarr_id,
        s.status,
        s.overview,
        s.added_at,
        COUNT(DISTINCT e.id) as episode_count
      FROM shows s
      LEFT JOIN seasons se ON se.show_id = s.id
      LEFT JOIN episodes e ON e.season_id = se.id
      GROUP BY s.id, s.title, s.path, s.sonarr_id, s.status, s.overview, s.added_at
      ORDER BY s.title
    `;
        const shows = db.prepare(query).all();
        const total = shows.length;
        logger2.info(`Found ${shows.length} shows in local database`);
        res.json({
          shows,
          total
        });
      } catch (error) {
        logger2.error("Failed to fetch shows:", error);
        res.status(500).json({
          error: "Failed to fetch shows",
          message: error.message
        });
      }
    });
    router2.post("/", (req, res) => {
      const db = req.app.get("db");
      const logger2 = req.app.get("logger");
      try {
        const { title, path: showPath, overview, sonarr_id, status } = req.body;
        logger2.info(`Creating show: ${title}`);
        const insertStmt = db.prepare(`
      INSERT INTO shows (title, path, overview, sonarr_id, status)
      VALUES (?, ?, ?, ?, ?)
    `);
        const result = insertStmt.run(title, showPath, overview, sonarr_id, status);
        logger2.info(`Show created with ID: ${result.lastInsertRowid}`);
        res.json({
          success: true,
          id: result.lastInsertRowid,
          message: "Show created successfully"
        });
      } catch (error) {
        logger2.error("Failed to create show:", error);
        res.status(500).json({
          error: "Failed to create show",
          message: error.message
        });
      }
    });
    router2.get("/:id", (req, res) => {
      const db = req.app.get("db");
      const logger2 = req.app.get("logger");
      try {
        const showId = parseInt(req.params.id);
        if (isNaN(showId)) {
          return res.status(400).json({ error: "Invalid show ID" });
        }
        const query = `
      SELECT 
        s.id, 
        s.title, 
        s.path, 
        s.sonarr_id,
        s.status,
        s.overview,
        s.added_at
      FROM shows s
      WHERE s.id = ?
    `;
        const show = db.prepare(query).get(showId);
        if (!show) {
          return res.status(404).json({ error: "Show not found" });
        }
        logger2.info(`Retrieved show: ${show.title}`);
        res.json(show);
      } catch (error) {
        logger2.error("Failed to fetch show:", error);
        res.status(500).json({
          error: "Failed to fetch show",
          message: error.message
        });
      }
    });
    router2.put("/:id", (req, res) => {
      const db = req.app.get("db");
      const logger2 = req.app.get("logger");
      try {
        const showId = parseInt(req.params.id);
        const { title, path: showPath, overview, sonarr_id, status } = req.body;
        if (isNaN(showId)) {
          return res.status(400).json({ error: "Invalid show ID" });
        }
        const updateStmt = db.prepare(`
      UPDATE shows 
      SET title = ?, path = ?, overview = ?, sonarr_id = ?, status = ?
      WHERE id = ?
    `);
        const result = updateStmt.run(title, showPath, overview, sonarr_id, status, showId);
        if (result.changes === 0) {
          return res.status(404).json({ error: "Show not found" });
        }
        logger2.info(`Updated show ID: ${showId}`);
        res.json({
          success: true,
          message: "Show updated successfully"
        });
      } catch (error) {
        logger2.error("Failed to update show:", error);
        res.status(500).json({
          error: "Failed to update show",
          message: error.message
        });
      }
    });
    router2.delete("/:id", (req, res) => {
      const db = req.app.get("db");
      const logger2 = req.app.get("logger");
      try {
        const showId = parseInt(req.params.id);
        if (isNaN(showId)) {
          return res.status(400).json({ error: "Invalid show ID" });
        }
        const deleteStmt = db.prepare("DELETE FROM shows WHERE id = ?");
        const result = deleteStmt.run(showId);
        if (result.changes === 0) {
          return res.status(404).json({ error: "Show not found" });
        }
        logger2.info(`Deleted show ID: ${showId}`);
        res.json({
          success: true,
          message: "Show deleted successfully"
        });
      } catch (error) {
        logger2.error("Failed to delete show:", error);
        res.status(500).json({
          error: "Failed to delete show",
          message: error.message
        });
      }
    });
    router2.post("/delete", (req, res) => {
      const db = req.app.get("db");
      const logger2 = req.app.get("logger");
      const { ids } = req.body;
      if (!Array.isArray(ids) || ids.length === 0) {
        return res.status(400).json({ error: "ids must be a non-empty array" });
      }
      try {
        db.transaction(() => {
          const episodeRows = db.prepare(
            `SELECT e.id FROM episodes e JOIN seasons s ON e.season_id = s.id WHERE s.show_id IN (${ids.map(() => "?").join(",")})`
          ).all(...ids);
          const episodeIds = episodeRows.map((row) => row.id);
          if (episodeIds.length > 0) {
            db.prepare(`DELETE FROM episode_files WHERE episode_id IN (${episodeIds.map(() => "?").join(",")})`).run(...episodeIds);
          }
          const seasonRows = db.prepare(
            `SELECT id FROM seasons WHERE show_id IN (${ids.map(() => "?").join(",")})`
          ).all(...ids);
          const seasonIds = seasonRows.map((row) => row.id);
          if (seasonIds.length > 0) {
            db.prepare(`DELETE FROM episodes WHERE season_id IN (${seasonIds.map(() => "?").join(",")})`).run(...seasonIds);
          }
          if (ids.length > 0) {
            db.prepare(`DELETE FROM seasons WHERE show_id IN (${ids.map(() => "?").join(",")})`).run(...ids);
            db.prepare(`DELETE FROM shows WHERE id IN (${ids.map(() => "?").join(",")})`).run(...ids);
          }
        })();
        logger2.info(`Cascade deleted shows and related data for IDs: ${ids}`);
        res.json({ success: true, deleted: ids.length });
      } catch (error) {
        logger2.error("Failed to cascade delete shows:", error.message, error.stack);
        res.status(500).json({ error: "Failed to cascade delete shows", message: error.message, stack: error.stack });
      }
    });
    shows_default = router2;
  }
});

// src/routes/sonarr.js
import express3 from "file:///home/d/cliprr/cliparr-node/node_modules/express/index.js";
import axios from "file:///home/d/cliprr/cliparr-node/node_modules/axios/index.js";
import dotenv2 from "file:///home/d/cliprr/cliparr-node/node_modules/dotenv/lib/main.js";
import process2 from "process";
import WebSocket from "file:///home/d/cliprr/cliparr-node/node_modules/ws/wrapper.mjs";
async function importShowById(showId, req, wss, db) {
  try {
    logger.info(`Starting import for show ID: ${showId}`);
    wss.clients.forEach((client) => {
      if (client.readyState === WebSocket.OPEN) {
        client.send(JSON.stringify({
          type: "import_progress",
          showId,
          status: "started",
          message: "Starting import process...",
          timestamp: (/* @__PURE__ */ new Date()).toISOString()
        }));
      }
    });
    const showResponse = await sonarrClient.get(`/api/v3/series/${showId}`);
    const show = showResponse.data;
    logger.info({ show }, "Fetched show details from Sonarr");
    wss.clients.forEach((client) => {
      if (client.readyState === WebSocket.OPEN) {
        client.send(JSON.stringify({
          type: "import_progress",
          showId,
          status: "fetching_episodes",
          message: "Fetching episodes...",
          timestamp: (/* @__PURE__ */ new Date()).toISOString()
        }));
      }
    });
    const episodeResponse = await sonarrClient.get(`/api/v3/episode?seriesId=${showId}`);
    const episodes = episodeResponse.data;
    logger.info(
      { episodeCount: episodes.length, episodes: episodes.slice(0, 3) },
      "Fetched episodes from Sonarr (showing first 3)"
    );
    const seasons = {};
    episodes.forEach((episode) => {
      if (!seasons[episode.seasonNumber]) {
        seasons[episode.seasonNumber] = {
          seasonNumber: episode.seasonNumber,
          episodes: []
        };
      }
      seasons[episode.seasonNumber].episodes.push(episode);
    });
    logger.info({ seasonCount: Object.keys(seasons).length }, "Prepared seasons grouping");
    wss.clients.forEach((client) => {
      if (client.readyState === WebSocket.OPEN) {
        client.send(JSON.stringify({
          type: "import_progress",
          showId,
          status: "importing",
          message: `Importing ${Object.keys(seasons).length} seasons...`,
          timestamp: (/* @__PURE__ */ new Date()).toISOString()
        }));
      }
    });
    try {
      logger.info("Beginning database transaction for import");
      db.transaction(() => {
        logger.info(
          {
            showInsert: {
              sonarr_id: show.id,
              title: show.title,
              overview: show.overview,
              path: show.path
            }
          },
          "Inserting show"
        );
        const showResult = db.prepare(`
          INSERT OR REPLACE INTO shows (
            sonarr_id, title, overview, path
          ) VALUES (?, ?, ?, ?)
        `).run(
          show.id,
          show.title,
          show.overview,
          show.path
        );
        Object.values(seasons).forEach((season) => {
          logger.info(
            {
              seasonInsert: {
                show_id: showResult.lastInsertRowid,
                season_number: season.seasonNumber
              }
            },
            "Inserting season"
          );
          const seasonResult = db.prepare(`
            INSERT OR IGNORE INTO seasons (
              show_id, season_number
            ) VALUES (?, ?)
          `).run(
            showResult.lastInsertRowid,
            season.seasonNumber
          );
          season.episodes.forEach((episode) => {
            logger.info(
              {
                episodeInsert: {
                  season_id: seasonResult.lastInsertRowid,
                  episode_number: episode.episodeNumber,
                  title: episode.title,
                  sonarr_episode_id: episode.id
                }
              },
              "Inserting episode"
            );
            db.prepare(`
              INSERT OR REPLACE INTO episodes (
                season_id, episode_number, title, sonarr_episode_id
              ) VALUES (?, ?, ?, ?)
            `).run(
              seasonResult.lastInsertRowid,
              episode.episodeNumber,
              episode.title,
              episode.id
            );
          });
        });
      })();
      logger.info("Database transaction for import completed successfully");
      wss.clients.forEach((client) => {
        if (client.readyState === WebSocket.OPEN) {
          client.send(JSON.stringify({
            type: "import_progress",
            showId,
            status: "completed",
            message: "Import completed successfully",
            timestamp: (/* @__PURE__ */ new Date()).toISOString()
          }));
        }
      });
      return { success: true, showId };
    } catch (txError) {
      logger.error(
        { txError: txError.stack || txError },
        "Database transaction failed during import"
      );
      wss.clients.forEach((client) => {
        if (client.readyState === WebSocket.OPEN) {
          client.send(JSON.stringify({
            type: "import_progress",
            showId,
            status: "error",
            message: "Import failed: " + txError.message,
            timestamp: (/* @__PURE__ */ new Date()).toISOString()
          }));
        }
      });
      return { success: false, showId, error: txError.message };
    }
  } catch (error) {
    logger.error({ error: error.message }, "Failed to import show");
    return { success: false, showId, error: error.message };
  }
}
var router3, SONARR_URL, SONARR_API_KEY, sonarrClient, testSonarrConnection, sonarr_default;
var init_sonarr = __esm({
  "src/routes/sonarr.js"() {
    "use strict";
    init_logger();
    dotenv2.config();
    router3 = express3.Router();
    SONARR_URL = process2.env.SONARR_URL;
    SONARR_API_KEY = process2.env.SONARR_API_KEY;
    logger.info(`Loaded SONARR_URL from env: ${SONARR_URL}`);
    if (SONARR_API_KEY) {
      logger.info(
        `Loaded SONARR_API_KEY from env: ${SONARR_API_KEY.slice(0, 4)}... (masked)`
      );
    } else {
      logger.warn("SONARR_API_KEY is not set in environment variables!");
    }
    sonarrClient = axios.create({
      baseURL: SONARR_URL,
      timeout: 15e3,
      // 15 second timeout
      headers: {
        "X-Api-Key": SONARR_API_KEY,
        "Content-Type": "application/json"
      }
    });
    sonarrClient.interceptors.response.use(
      (response) => response,
      (error) => {
        if (error.code === "ECONNABORTED") {
          logger.error("Sonarr API request timed out");
          throw new Error(
            "Sonarr API request timed out. Please check if Sonarr is running and accessible."
          );
        }
        if (error.response) {
          if (error.response.status === 401) {
            logger.error("Invalid Sonarr API key");
            throw new Error(
              "Invalid Sonarr API key. Please check your SONARR_API_KEY environment variable."
            );
          }
          logger.error(
            {
              status: error.response.status,
              data: error.response.data
            },
            "Sonarr API error response"
          );
          throw new Error(
            "Sonarr API error: " + error.response.status + " - " + JSON.stringify(error.response.data)
          );
        }
        if (error.request) {
          logger.error("No response received from Sonarr API");
          throw new Error(
            "No response from Sonarr API at " + SONARR_URL + ". Please check if Sonarr is running and accessible."
          );
        }
        logger.error({ error: error.message }, "Sonarr API request failed");
        throw error;
      }
    );
    testSonarrConnection = async () => {
      try {
        logger.info(`Testing connection to Sonarr at ${SONARR_URL}`);
        const response = await sonarrClient.get("/api/v3/system/status");
        logger.info("Successfully connected to Sonarr API");
        logger.debug({ version: response.data.version }, "Sonarr version");
      } catch (error) {
        logger.error("Failed to connect to Sonarr API:", error.message);
        throw error;
      }
    };
    testSonarrConnection().catch((error) => {
      logger.error("Sonarr API connection test failed:", error.message);
    });
    router3.get("/unimported", async (req, res) => {
      try {
        logger.info("Fetching unimported shows from Sonarr");
        const response = await sonarrClient.get("/api/v3/series");
        const shows = response.data;
        const db = req.app.get("db");
        const importedShows = db.prepare("SELECT sonarr_id FROM shows").all();
        const importedIds = new Set(importedShows.map((show) => show.sonarr_id));
        const unimportedShows = shows.filter((show) => !importedIds.has(show.id));
        logger.info(`Found ${unimportedShows.length} unimported shows`);
        res.json(unimportedShows);
      } catch (error) {
        logger.error({ error: error.message }, "Failed to fetch unimported shows");
        res.status(500).json({
          error: "Failed to fetch unimported shows",
          details: error.message
        });
      }
    });
    router3.post("/import/:id", async (req, res) => {
      if (!req.app.get("db")) {
        logger.error("Database instance is not set on app");
        return res.status(500).json({ success: false, message: "Database not initialized" });
      }
      if (!logger) {
        logger.error("Logger is not set on app");
        return res.status(500).json({ success: false, message: "Logger not initialized" });
      }
      if (!sonarrClient) {
        logger.error("Sonarr client is not set on app");
        return res.status(500).json({ success: false, message: "Sonarr client not initialized" });
      }
      try {
        const showId = req.params.id;
        const wss = req.app.get("wss");
        const db = req.app.get("db");
        const result = await importShowById(showId, req, wss, db);
        if (result.success) {
          res.json({ success: true, message: "Show imported successfully" });
        } else {
          res.status(500).json({ error: result.error });
        }
      } catch (error) {
        res.status(500).json({ error: error.message });
      }
    });
    router3.post("/import", async (req, res) => {
      if (!req.app.get("db")) {
        logger.error("Database instance is not set on app");
        return res.status(500).json({ success: false, message: "Database not initialized" });
      }
      if (!logger) {
        logger.error("Logger is not set on app");
        return res.status(500).json({ success: false, message: "Logger not initialized" });
      }
      if (!sonarrClient) {
        logger.error("Sonarr client is not set on app");
        return res.status(500).json({ success: false, message: "Sonarr client not initialized" });
      }
      const { showIds } = req.body;
      if (!Array.isArray(showIds) || showIds.length === 0) {
        return res.status(400).json({ error: "showIds must be a non-empty array" });
      }
      const wss = req.app.get("wss");
      const db = req.app.get("db");
      const results = [];
      for (const showId of showIds) {
        const result = await importShowById(showId, req, wss, db);
        results.push(result);
      }
      res.json({
        importedCount: results.filter((r) => r.success).length,
        results
      });
    });
    sonarr_default = router3;
  }
});

// src/database/Schema.mjs
var STATEMENTS;
var init_Schema = __esm({
  "src/database/Schema.mjs"() {
    "use strict";
    STATEMENTS = [
      // tables
      `
    CREATE TABLE IF NOT EXISTS shows (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      title TEXT NOT NULL,
      sonarr_id INTEGER UNIQUE,
      path TEXT,
      overview TEXT,
      status TEXT,
      added_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )`,
      `
    CREATE TABLE IF NOT EXISTS seasons (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      show_id INTEGER,
      season_number INTEGER,
      monitored BOOLEAN DEFAULT 1,
      FOREIGN KEY (show_id) REFERENCES shows(id) ON DELETE CASCADE,
      UNIQUE(show_id, season_number)
    )`,
      `
    CREATE TABLE IF NOT EXISTS episodes (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      season_id INTEGER,
      sonarr_episode_id INTEGER UNIQUE,
      episode_number INTEGER,
      title TEXT,
      monitored BOOLEAN DEFAULT 1,
      FOREIGN KEY (season_id) REFERENCES seasons(id) ON DELETE CASCADE
    )`,
      `
    CREATE TABLE IF NOT EXISTS episode_files (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      episode_id INTEGER,
      file_path TEXT,
      size INTEGER,
      quality TEXT,
      FOREIGN KEY (episode_id) REFERENCES episodes(id) ON DELETE CASCADE
    )`,
      `
    CREATE TABLE IF NOT EXISTS settings (
      key TEXT PRIMARY KEY,
      value TEXT
    )`,
      // indexes
      `CREATE INDEX IF NOT EXISTS idx_shows_title            ON shows(title COLLATE NOCASE)`,
      `CREATE INDEX IF NOT EXISTS idx_shows_sonarr_id        ON shows(sonarr_id)`,
      `CREATE INDEX IF NOT EXISTS idx_seasons_show_id        ON seasons(show_id)`,
      `CREATE INDEX IF NOT EXISTS idx_episodes_season_id     ON episodes(season_id)`,
      `CREATE INDEX IF NOT EXISTS idx_episodes_sonarr_ep_id  ON episodes(sonarr_episode_id)`
    ];
  }
});

// src/database/Auto_DB_Setup.js
import Database from "file:///home/d/cliprr/cliparr-node/node_modules/better-sqlite3/lib/index.js";
import path2 from "path";
import fs from "fs";
function getDatabaseSingleton(dbPath) {
  if (dbInstance) {
    return dbInstance;
  }
  logger.info({ dbPath }, "Initializing database");
  fs.mkdirSync(path2.dirname(dbPath), { recursive: true });
  dbInstance = new Database(dbPath);
  ["journal_mode = WAL", "busy_timeout = 5000"].forEach((setting) => dbInstance.pragma(setting));
  try {
    const init = dbInstance.transaction(() => {
      for (const stmt of STATEMENTS) {
        dbInstance.exec(stmt);
      }
      dbInstance.exec(
        "INSERT OR IGNORE INTO settings (key, value) VALUES ('import_mode', 'none');"
      );
      dbInstance.exec(
        "INSERT OR IGNORE INTO settings (key, value) VALUES ('polling_interval', '900');"
      );
    });
    init();
  } catch (err) {
    logger.error({ err }, "Schema initialization failed");
    throw err;
  }
  logger.info({ dbPath }, "Database initialized successfully");
  return dbInstance;
}
var dbInstance;
var init_Auto_DB_Setup = __esm({
  "src/database/Auto_DB_Setup.js"() {
    "use strict";
    init_logger();
    init_Schema();
    dbInstance = null;
  }
});

// src/database/Db_Operations.js
function getDb(dbPath = "data/cliparr.db") {
  return getDatabaseSingleton(dbPath);
}
function getImportMode(db) {
  try {
    const row = db.prepare("SELECT value FROM settings WHERE key = ?").get("import_mode");
    return row ? row.value : "none";
  } catch (error) {
    logger.error("Failed to get import mode:", error);
    throw error;
  }
}
function setImportMode(db, mode) {
  try {
    db.prepare("INSERT OR REPLACE INTO settings (key, value) VALUES (?, ?)").run("import_mode", mode);
  } catch (error) {
    logger.error("Failed to set import mode:", error);
    throw error;
  }
}
function getPollingInterval(db) {
  try {
    const row = db.prepare("SELECT value FROM settings WHERE key = ?").get("polling_interval");
    return row ? parseInt(row.value, 10) : 900;
  } catch (error) {
    logger.error("Failed to get polling interval:", error);
    throw error;
  }
}
function setPollingInterval(db, interval) {
  try {
    const validInterval = Math.max(60, Math.min(86400, interval));
    db.prepare("INSERT OR REPLACE INTO settings (key, value) VALUES (?, ?)").run("polling_interval", validInterval.toString());
    logger.info({ interval: validInterval }, "Polling interval updated");
  } catch (error) {
    logger.error("Failed to set polling interval:", error);
    throw error;
  }
}
var init_Db_Operations = __esm({
  "src/database/Db_Operations.js"() {
    "use strict";
    init_Auto_DB_Setup();
    init_logger();
  }
});

// src/routes/settings.js
import express4 from "file:///home/d/cliprr/cliparr-node/node_modules/express/index.js";
var router4, settings_default;
var init_settings = __esm({
  "src/routes/settings.js"() {
    "use strict";
    init_Db_Operations();
    init_logger();
    router4 = express4.Router();
    router4.get("/import-mode", (req, res) => {
      const db = getDb();
      try {
        const mode = getImportMode(db);
        res.json({ mode });
      } catch (error) {
        console.error("Failed to get import mode:", error);
        res.status(500).json({
          error: "Failed to get import mode",
          details: error && (error.stack || error.message || error)
        });
      }
    });
    router4.post("/import-mode", (req, res) => {
      const db = getDb();
      const { mode } = req.body;
      try {
        if (!mode || !["auto", "import", "none"].includes(mode)) {
          return res.status(400).json({ error: "Invalid import mode." });
        }
        setImportMode(db, mode);
        res.json({ status: "ok", mode });
      } catch (error) {
        console.error("Failed to set import mode:", error);
        res.status(500).json({
          error: "Failed to set import mode",
          details: error && (error.stack || error.message || error)
        });
      }
    });
    router4.get("/polling-interval", (req, res) => {
      const db = getDb();
      try {
        const interval = getPollingInterval(db);
        logger.info({ interval }, "GET polling interval");
        res.json({ interval });
      } catch (error) {
        logger.error("Failed to get polling interval:", error);
        res.status(500).json({
          error: "Failed to get polling interval",
          details: error && (error.stack || error.message || error)
        });
      }
    });
    router4.post("/polling-interval", (req, res) => {
      const db = getDb();
      const { interval } = req.body;
      logger.info({ interval }, "POST polling interval");
      try {
        if (!interval || isNaN(interval) || interval < 60 || interval > 86400) {
          return res.status(400).json({
            error: "Invalid polling interval. Must be between 60 and 86400 seconds."
          });
        }
        setPollingInterval(db, parseInt(interval, 10));
        const savedInterval = getPollingInterval(db);
        logger.info({ savedInterval }, "Saved polling interval");
        res.json({ status: "ok", interval: savedInterval });
      } catch (error) {
        logger.error("Failed to set polling interval:", error);
        res.status(500).json({
          error: "Failed to set polling interval",
          details: error && (error.stack || error.message || error)
        });
      }
    });
    settings_default = router4;
  }
});

// src/app.js
import express5 from "file:///home/d/cliprr/cliparr-node/node_modules/express/index.js";
function createApp({ db, logger: logger2, wss }) {
  const app = express5();
  app.set("db", db);
  app.set("logger", logger2);
  app.set("wss", wss);
  app.use(express5.json());
  app.use(cors);
  app.use("/health", health_default);
  app.use("/shows", shows_default);
  app.use("/sonarr", sonarr_default);
  app.use("/settings", settings_default);
  return app;
}
var init_app2 = __esm({
  "src/app.js"() {
    "use strict";
    init_cors();
    init_health();
    init_shows();
    init_sonarr();
    init_settings();
  }
});

// src/services/websocket.js
import { WebSocketServer } from "file:///home/d/cliprr/cliparr-node/node_modules/ws/wrapper.mjs";
function setupWebSocket(server, { path: path4 = "/ws", heartbeat = 3e4 } = {}) {
  wsServer = new WebSocketServer({ server, path: path4 });
  logger.info({ path: path4 }, "WebSocketServer listening");
  wsServer.on("connection", (ws) => {
    logger.debug("WebSocket client connected");
    ws.isAlive = true;
    ws.on("pong", () => ws.isAlive = true);
    ws.on("message", (raw) => {
      logger.debug({ raw }, "WS message");
      ws.send(JSON.stringify({
        type: "echo",
        data: raw.toString(),
        timestamp: (/* @__PURE__ */ new Date()).toISOString()
      }));
    });
    ws.on("error", (err) => {
      logger.error({ err }, "WebSocket error");
    });
    ws.on("close", () => {
      logger.debug("WebSocket disconnected");
    });
    ws.send(JSON.stringify({
      type: "welcome",
      message: "Connected to Cliparr backend",
      timestamp: (/* @__PURE__ */ new Date()).toISOString()
    }));
  });
  const interval = setInterval(() => {
    wsServer.clients.forEach((ws) => {
      if (!ws.isAlive) {
        return ws.terminate();
      }
      ws.isAlive = false;
      ws.ping();
    });
  }, heartbeat);
  wsServer.on("close", () => clearInterval(interval));
  logger.info("WebSocket server initialized");
}
function getWebSocketServer() {
  return wsServer;
}
var wsServer;
var init_websocket = __esm({
  "src/services/websocket.js"() {
    "use strict";
    init_logger();
  }
});

// src/utils/isPortFree.js
import http from "http";
function isPortInUse(port) {
  return new Promise((resolve) => {
    const tester = http.createServer();
    tester.once("error", () => resolve(true));
    tester.once(
      "listening",
      () => tester.close(() => resolve(false))
    );
    tester.listen(port);
  });
}
var init_isPortFree = __esm({
  "src/utils/isPortFree.js"() {
    "use strict";
  }
});

// src/integration/server.js
var server_exports = {};
__export(server_exports, {
  startServer: () => startServer
});
import http2 from "http";
async function startServer() {
  if (serverInstance) {
    return serverInstance;
  }
  if (await isPortInUse(config_default.port)) {
    throw new Error(`Port ${config_default.port} in use`);
  }
  dbInstance2 = getDatabaseSingleton(config_default.db.path);
  const app = createApp({ db: dbInstance2, logger, wss: null });
  serverInstance = http2.createServer(app);
  setupWebSocket(serverInstance, config_default.ws);
  app.set("wss", getWebSocketServer());
  serverInstance.listen(
    config_default.port,
    config_default.host,
    () => logger.info(`Listening on ${config_default.host}:${config_default.port}`)
  );
  return serverInstance;
}
var serverInstance, dbInstance2;
var init_server = __esm({
  "src/integration/server.js"() {
    "use strict";
    init_logger();
    init_config();
    init_app2();
    init_websocket();
    init_Auto_DB_Setup();
    init_isPortFree();
  }
});

// vite.config.ts
import { defineConfig } from "file:///home/d/cliprr/cliparr-node/node_modules/vite/dist/node/index.js";
import react from "file:///home/d/cliprr/cliparr-node/node_modules/@vitejs/plugin-react/dist/index.mjs";
import path3 from "path";
import { fileURLToPath } from "url";
var __vite_injected_original_import_meta_url = "file:///home/d/cliprr/cliparr-node/vite.config.ts";
var __dirname2 = path3.dirname(fileURLToPath(__vite_injected_original_import_meta_url));
var vite_config_default = defineConfig({
  plugins: [
    react(),
    // Plugin to start backend server alongside Vite
    {
      name: "backend-integration",
      configureServer() {
        setTimeout(async () => {
          try {
            const { startServer: startServer2 } = await Promise.resolve().then(() => (init_server(), server_exports));
            await startServer2();
            console.log("\u2705 Backend server started successfully");
          } catch (err) {
            console.error("\u274C Failed to start backend server:", err);
          }
        }, 1e3);
      }
    }
  ],
  server: {
    host: "0.0.0.0",
    port: 8484,
    // Frontend port
    watch: {
      ignored: ["**/src/database/data/**"]
      // Ignore DB changes
    }
  },
  build: {
    outDir: "dist",
    sourcemap: true
  },
  resolve: {
    alias: {
      "@": path3.resolve(__dirname2, "./src")
    }
  }
});
export {
  vite_config_default as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL3NlcnZpY2VzL2xvZ2dlci5qcyIsICJzcmMvY29uZmlnL2luZGV4LmpzIiwgInNyYy9jb25maWcvYXBwLmpzIiwgInNyYy9taWRkbGV3YXJlL2NvcnMuanMiLCAic3JjL3JvdXRlcy9oZWFsdGguanMiLCAic3JjL3JvdXRlcy9zaG93cy5qcyIsICJzcmMvcm91dGVzL3NvbmFyci5qcyIsICJzcmMvZGF0YWJhc2UvU2NoZW1hLm1qcyIsICJzcmMvZGF0YWJhc2UvQXV0b19EQl9TZXR1cC5qcyIsICJzcmMvZGF0YWJhc2UvRGJfT3BlcmF0aW9ucy5qcyIsICJzcmMvcm91dGVzL3NldHRpbmdzLmpzIiwgInNyYy9hcHAuanMiLCAic3JjL3NlcnZpY2VzL3dlYnNvY2tldC5qcyIsICJzcmMvdXRpbHMvaXNQb3J0RnJlZS5qcyIsICJzcmMvaW50ZWdyYXRpb24vc2VydmVyLmpzIiwgInZpdGUuY29uZmlnLnRzIl0sCiAgInNvdXJjZVJvb3QiOiAiL2hvbWUvZC9jbGlwcnIvY2xpcGFyci1ub2RlLyIsCiAgInNvdXJjZXNDb250ZW50IjogWyJjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZGlybmFtZSA9IFwiL2hvbWUvZC9jbGlwcnIvY2xpcGFyci1ub2RlL3NyYy9zZXJ2aWNlc1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9maWxlbmFtZSA9IFwiL2hvbWUvZC9jbGlwcnIvY2xpcGFyci1ub2RlL3NyYy9zZXJ2aWNlcy9sb2dnZXIuanNcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfaW1wb3J0X21ldGFfdXJsID0gXCJmaWxlOi8vL2hvbWUvZC9jbGlwcnIvY2xpcGFyci1ub2RlL3NyYy9zZXJ2aWNlcy9sb2dnZXIuanNcIjsvKiBlc2xpbnQtZW52IG5vZGUgKi9cbi8vIHNyYy9zZXJ2aWNlcy9sb2dnZXIuanNcbmltcG9ydCBwaW5vIGZyb20gJ3Bpbm8nO1xuXG5jb25zdCBpc1Byb2QgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nO1xuXG5leHBvcnQgY29uc3QgbG9nZ2VyID0gcGlubyh7XG4gIGxldmVsOiBwcm9jZXNzLmVudi5MT0dfTEVWRUwgfHwgKGlzUHJvZCA/ICdpbmZvJyA6ICdkZWJ1ZycpLFxuICAvLyBpbiBwcm9kIHdlIGVtaXQgcmF3IEpTT04gc28gbG9nIGFnZ3JlZ2F0b3JzIGNhbiBwYXJzZSBpdDtcbiAgLy8gaW4gZGV2IHdlIHByZXR0eS1wcmludCBmb3IgdGhlIGNvbnNvbGVcbiAgdHJhbnNwb3J0OiBpc1Byb2RcbiAgICA/IHVuZGVmaW5lZFxuICAgIDoge1xuICAgICAgdGFyZ2V0OiAncGluby1wcmV0dHknLFxuICAgICAgb3B0aW9uczoge1xuICAgICAgICBjb2xvcml6ZTogdHJ1ZSxcbiAgICAgICAgbGV2ZWxGaXJzdDogdHJ1ZSxcbiAgICAgICAgdHJhbnNsYXRlVGltZTogJ1NZUzpzdGFuZGFyZCcsXG4gICAgICAgIGlnbm9yZTogJ3BpZCxob3N0bmFtZScsXG4gICAgICB9LFxuICAgIH0sXG4gIC8vIGF1dG9tYXRpY2FsbHkgc2VyaWFsaXplIEVycm9ycyAoc28geW91IGdldCBzdGFjayB0cmFjZXMsIGV0Yy4pXG4gIHNlcmlhbGl6ZXJzOiB7XG4gICAgLi4ucGluby5zdGRTZXJpYWxpemVycyxcbiAgICBlcnI6IHBpbm8uc3RkU2VyaWFsaXplcnMuZXJyLFxuICB9LFxuICAvLyByZWRhY3QgYW55IHNlbnNpdGl2ZSBmaWVsZHMgYnkgZGVmYXVsdFxuICByZWRhY3Q6IHtcbiAgICBwYXRoczogWydyZXEuaGVhZGVycy5hdXRob3JpemF0aW9uJywgJ3Bhc3N3b3JkJ10sXG4gICAgcmVtb3ZlOiB0cnVlLFxuICB9LFxufSk7XG4iLCAiY29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2Rpcm5hbWUgPSBcIi9ob21lL2QvY2xpcHJyL2NsaXBhcnItbm9kZS9zcmMvY29uZmlnXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ZpbGVuYW1lID0gXCIvaG9tZS9kL2NsaXByci9jbGlwYXJyLW5vZGUvc3JjL2NvbmZpZy9pbmRleC5qc1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9pbXBvcnRfbWV0YV91cmwgPSBcImZpbGU6Ly8vaG9tZS9kL2NsaXByci9jbGlwYXJyLW5vZGUvc3JjL2NvbmZpZy9pbmRleC5qc1wiOy8vIHNyYy9jb25maWcvaW5kZXguanNcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnO1xuZG90ZW52LmNvbmZpZygpO1xuXG5jb25zdCBpc1Byb2QgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nO1xuXG5jb25zdCBjb25maWcgPSB7XG4gIGVudjogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgfHwgJ2RldmVsb3BtZW50JyxcbiAgaG9zdDogcHJvY2Vzcy5lbnYuSE9TVCB8fCAnMC4wLjAuMCcsXG4gIHBvcnQ6ICsocHJvY2Vzcy5lbnYuUE9SVCB8fCA4NDg1KSxcblxuICAvLyBTb25hcnJcbiAgc29uYXJyOiB7XG4gICAgYXBpS2V5OiBwcm9jZXNzLmVudi5TT05BUlJfQVBJX0tFWSxcbiAgICB1cmw6IHByb2Nlc3MuZW52LlNPTkFSUl9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODk4OScsXG4gIH0sXG5cbiAgLy8gRGF0YWJhc2VcbiAgZGI6IHtcbiAgICBwYXRoOiBwcm9jZXNzLmVudi5EQl9QQVRIXG4gICAgICB8fCBwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4nLCAnZGF0YWJhc2UnLCAnZGF0YScsICdjbGlwYXJyLmRiJyksXG4gIH0sXG5cbiAgLy8gV2ViU29ja2V0XG4gIHdzOiB7XG4gICAgcGF0aDogcHJvY2Vzcy5lbnYuV1NfUEFUSCB8fCAnL3dzJyxcbiAgICBoZWFydGJlYXQ6ICsocHJvY2Vzcy5lbnYuV1NfUElOR19NUyB8fCAzMDAwMCksXG4gIH0sXG5cbiAgLy8gQ09SUyAodXNlZCBpbiB5b3VyIGNvcnMgbWlkZGxld2FyZSlcbiAgY29yczoge1xuICAgIG9yaWdpbjogaXNQcm9kXG4gICAgICA/IHByb2Nlc3MuZW52LkZST05URU5EX1VSTCB8fCAnaHR0cHM6Ly9jbGlwcnIuZXhhbXBsZS5jb20nXG4gICAgICA6ICdodHRwOi8vbG9jYWxob3N0Ojg0ODQnLFxuICAgIG1ldGhvZHM6IFsnR0VUJywgJ1BPU1QnLCAnUFVUJywgJ0RFTEVURScsICdPUFRJT05TJ10sXG4gICAgYWxsb3dlZEhlYWRlcnM6IFsnQ29udGVudC1UeXBlJywgJ0F1dGhvcml6YXRpb24nXSxcbiAgICBjcmVkZW50aWFsczogdHJ1ZSxcbiAgfSxcbn07XG5cbi8vIGZhaWwgZmFzdCBvbiBjcml0aWNhbCBFTlZcbmlmICghY29uZmlnLnNvbmFyci5hcGlLZXkpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIEVOViB2YXI6IFNPTkFSUl9BUElfS0VZJyk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNvbmZpZztcbiIsICJjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZGlybmFtZSA9IFwiL2hvbWUvZC9jbGlwcnIvY2xpcGFyci1ub2RlL3NyYy9jb25maWdcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZmlsZW5hbWUgPSBcIi9ob21lL2QvY2xpcHJyL2NsaXBhcnItbm9kZS9zcmMvY29uZmlnL2FwcC5qc1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9pbXBvcnRfbWV0YV91cmwgPSBcImZpbGU6Ly8vaG9tZS9kL2NsaXByci9jbGlwYXJyLW5vZGUvc3JjL2NvbmZpZy9hcHAuanNcIjtpbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuLi9zZXJ2aWNlcy9sb2dnZXIuanMnO1xuXG4vLyBEZXZlbG9wbWVudCBjb25maWd1cmF0aW9uXG5jb25zdCBkZXZDb25maWcgPSB7XG4gIGNvcnM6IHtcbiAgICBvcmlnaW46ICdodHRwOi8vbG9jYWxob3N0Ojg0ODQnLFxuICAgIG1ldGhvZHM6IFsnR0VUJywgJ1BPU1QnLCAnUFVUJywgJ0RFTEVURScsICdPUFRJT05TJ10sXG4gICAgaGVhZGVyczogWydDb250ZW50LVR5cGUnLCAnQXV0aG9yaXphdGlvbiddLFxuICAgIGNyZWRlbnRpYWxzOiB0cnVlLFxuICB9LFxufTtcblxuLy8gUHJvZHVjdGlvbiBjb25maWd1cmF0aW9uXG5jb25zdCBwcm9kQ29uZmlnID0ge1xuICBjb3JzOiB7XG4gICAgb3JpZ2luOiAnaHR0cHM6Ly9jbGlwcnIuZXhhbXBsZS5jb20nLCAvLyBUaGlzIHdpbGwgYmUgdXBkYXRlZCBmb3IgcHJvZHVjdGlvblxuICAgIG1ldGhvZHM6IFsnR0VUJywgJ1BPU1QnLCAnUFVUJywgJ0RFTEVURScsICdPUFRJT05TJ10sXG4gICAgaGVhZGVyczogWydDb250ZW50LVR5cGUnLCAnQXV0aG9yaXphdGlvbiddLFxuICAgIGNyZWRlbnRpYWxzOiB0cnVlLFxuICB9LFxufTtcblxuLy8gRGV0ZXJtaW5lIGVudmlyb25tZW50XG5jb25zdCBpc1Byb2R1Y3Rpb24gPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nO1xuY29uc3QgY29uZmlnID0gaXNQcm9kdWN0aW9uID8gcHJvZENvbmZpZyA6IGRldkNvbmZpZztcblxubG9nZ2VyLmluZm8oYFVzaW5nICR7aXNQcm9kdWN0aW9uID8gJ3Byb2R1Y3Rpb24nIDogJ2RldmVsb3BtZW50J30gY29uZmlndXJhdGlvbmApO1xuXG5leHBvcnQgZGVmYXVsdCBjb25maWc7XG4iLCAiY29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2Rpcm5hbWUgPSBcIi9ob21lL2QvY2xpcHJyL2NsaXBhcnItbm9kZS9zcmMvbWlkZGxld2FyZVwiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9maWxlbmFtZSA9IFwiL2hvbWUvZC9jbGlwcnIvY2xpcGFyci1ub2RlL3NyYy9taWRkbGV3YXJlL2NvcnMuanNcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfaW1wb3J0X21ldGFfdXJsID0gXCJmaWxlOi8vL2hvbWUvZC9jbGlwcnIvY2xpcGFyci1ub2RlL3NyYy9taWRkbGV3YXJlL2NvcnMuanNcIjsvLyBzcmMvbWlkZGxld2FyZS9jb3JzLmpzXG5pbXBvcnQgY29uZmlnIGZyb20gJy4uL2NvbmZpZy9hcHAuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjb3JzKHJlcSwgcmVzLCBuZXh0KSB7XG4gIGNvbnN0IHsgY29yczogY29yc0NvbmZpZyB9ID0gY29uZmlnO1xuXG4gIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsIGNvcnNDb25maWcub3JpZ2luKTtcbiAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcycsIGNvcnNDb25maWcubWV0aG9kcy5qb2luKCcsJykpO1xuICByZXMuaGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgY29yc0NvbmZpZy5oZWFkZXJzLmpvaW4oJywnKSk7XG4gIHJlcy5oZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUNyZWRlbnRpYWxzJywgY29yc0NvbmZpZy5jcmVkZW50aWFscy50b1N0cmluZygpKTtcblxuICBpZiAocmVxLm1ldGhvZCA9PT0gJ09QVElPTlMnKSB7XG4gICAgcmV0dXJuIHJlcy5zZW5kU3RhdHVzKDIwMCk7XG4gIH1cbiAgbmV4dCgpO1xufVxuIiwgImNvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9kaXJuYW1lID0gXCIvaG9tZS9kL2NsaXByci9jbGlwYXJyLW5vZGUvc3JjL3JvdXRlc1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9maWxlbmFtZSA9IFwiL2hvbWUvZC9jbGlwcnIvY2xpcGFyci1ub2RlL3NyYy9yb3V0ZXMvaGVhbHRoLmpzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCA9IFwiZmlsZTovLy9ob21lL2QvY2xpcHJyL2NsaXBhcnItbm9kZS9zcmMvcm91dGVzL2hlYWx0aC5qc1wiOy8vIHNyYy9pbnRlZ3JhdGlvbi9yb3V0ZXMvYXBpLmpzIC0gR2VuZXJhbCBBUEkgcm91dGVzXG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbi8vIEhlYWx0aCBjaGVjayBlbmRwb2ludFxucm91dGVyLmdldCgnL3N0YXR1cycsIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCBsb2dnZXIgPSByZXEuYXBwLmdldCgnbG9nZ2VyJyk7XG4gIGxvZ2dlci5pbmZvKCdIZWFsdGggY2hlY2sgcmVxdWVzdGVkJyk7XG5cbiAgcmVzLmpzb24oe1xuICAgIHN0YXR1czogJ2hlYWx0aHknLFxuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIGRhdGFiYXNlOiAnY29ubmVjdGVkJyxcbiAgICBzZXJ2ZXI6ICdpbnRlZ3JhdGVkLWJhY2tlbmQnLFxuICB9KTtcbn0pO1xuXG4vLyBEYXRhYmFzZSB0ZXN0IGVuZHBvaW50XG5yb3V0ZXIuZ2V0KCcvZGItdGVzdCcsIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCBkYiA9IHJlcS5hcHAuZ2V0KCdkYicpO1xuICBjb25zdCBsb2dnZXIgPSByZXEuYXBwLmdldCgnbG9nZ2VyJyk7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB0ZXN0UmVzdWx0ID0gZGIudHJhbnNhY3Rpb24oKCkgPT4ge1xuICAgICAgZGIucHJlcGFyZSgnSU5TRVJUIE9SIFJFUExBQ0UgSU5UTyBzZXR0aW5ncyAoa2V5LCB2YWx1ZSkgVkFMVUVTICg/LCA/KScpXG4gICAgICAgIC5ydW4oJ3Rlc3Rfa2V5JywgJ3Rlc3RfdmFsdWUnKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gZGIucHJlcGFyZSgnU0VMRUNUIHZhbHVlIEZST00gc2V0dGluZ3MgV0hFUkUga2V5ID0gPycpXG4gICAgICAgIC5nZXQoJ3Rlc3Rfa2V5Jyk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6ICdEYXRhYmFzZSB0ZXN0IHN1Y2Nlc3NmdWwnLFxuICAgICAgICB0ZXN0VmFsdWU6IHJlc3VsdD8udmFsdWUsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgfTtcbiAgICB9KSgpO1xuXG4gICAgcmVzLmpzb24odGVzdFJlc3VsdCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdEYXRhYmFzZSB0ZXN0IGZhaWxlZDonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBtZXNzYWdlOiAnRGF0YWJhc2UgdGVzdCBmYWlsZWQnLFxuICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXG4gICAgfSk7XG4gIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG4iLCAiY29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2Rpcm5hbWUgPSBcIi9ob21lL2QvY2xpcHJyL2NsaXBhcnItbm9kZS9zcmMvcm91dGVzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ZpbGVuYW1lID0gXCIvaG9tZS9kL2NsaXByci9jbGlwYXJyLW5vZGUvc3JjL3JvdXRlcy9zaG93cy5qc1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9pbXBvcnRfbWV0YV91cmwgPSBcImZpbGU6Ly8vaG9tZS9kL2NsaXByci9jbGlwYXJyLW5vZGUvc3JjL3JvdXRlcy9zaG93cy5qc1wiOy8vIHNyYy9pbnRlZ3JhdGlvbi9yb3V0ZXMvc2hvd3MuanMgLSBTaG93cyBBUEkgcm91dGVzXG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbi8vIEdldCBzaG93cyB3aXRob3V0IHBhZ2luYXRpb25cbnJvdXRlci5nZXQoJy8nLCAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgZGIgPSByZXEuYXBwLmdldCgnZGInKTtcbiAgY29uc3QgbG9nZ2VyID0gcmVxLmFwcC5nZXQoJ2xvZ2dlcicpO1xuXG4gIHRyeSB7XG4gICAgbG9nZ2VyLmluZm8oJ0ZldGNoaW5nIGFsbCBzaG93cyAobm8gcGFnaW5hdGlvbiknKTtcblxuICAgIGNvbnN0IHF1ZXJ5ID0gYFxuICAgICAgU0VMRUNUIFxuICAgICAgICBzLmlkLCBcbiAgICAgICAgcy50aXRsZSwgXG4gICAgICAgIHMucGF0aCwgXG4gICAgICAgIHMuc29uYXJyX2lkLFxuICAgICAgICBzLnN0YXR1cyxcbiAgICAgICAgcy5vdmVydmlldyxcbiAgICAgICAgcy5hZGRlZF9hdCxcbiAgICAgICAgQ09VTlQoRElTVElOQ1QgZS5pZCkgYXMgZXBpc29kZV9jb3VudFxuICAgICAgRlJPTSBzaG93cyBzXG4gICAgICBMRUZUIEpPSU4gc2Vhc29ucyBzZSBPTiBzZS5zaG93X2lkID0gcy5pZFxuICAgICAgTEVGVCBKT0lOIGVwaXNvZGVzIGUgT04gZS5zZWFzb25faWQgPSBzZS5pZFxuICAgICAgR1JPVVAgQlkgcy5pZCwgcy50aXRsZSwgcy5wYXRoLCBzLnNvbmFycl9pZCwgcy5zdGF0dXMsIHMub3ZlcnZpZXcsIHMuYWRkZWRfYXRcbiAgICAgIE9SREVSIEJZIHMudGl0bGVcbiAgICBgO1xuXG4gICAgY29uc3Qgc2hvd3MgPSBkYi5wcmVwYXJlKHF1ZXJ5KS5hbGwoKTtcbiAgICBjb25zdCB0b3RhbCA9IHNob3dzLmxlbmd0aDtcblxuICAgIGxvZ2dlci5pbmZvKGBGb3VuZCAke3Nob3dzLmxlbmd0aH0gc2hvd3MgaW4gbG9jYWwgZGF0YWJhc2VgKTtcblxuICAgIHJlcy5qc29uKHtcbiAgICAgIHNob3dzLFxuICAgICAgdG90YWwsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggc2hvd3M6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIHNob3dzJyxcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgfSk7XG4gIH1cbn0pO1xuXG4vLyBDcmVhdGUgbmV3IHNob3dcbnJvdXRlci5wb3N0KCcvJywgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IGRiID0gcmVxLmFwcC5nZXQoJ2RiJyk7XG4gIGNvbnN0IGxvZ2dlciA9IHJlcS5hcHAuZ2V0KCdsb2dnZXInKTtcblxuICB0cnkge1xuICAgIGNvbnN0IHsgdGl0bGUsIHBhdGg6IHNob3dQYXRoLCBvdmVydmlldywgc29uYXJyX2lkLCBzdGF0dXMgfSA9IHJlcS5ib2R5O1xuXG4gICAgbG9nZ2VyLmluZm8oYENyZWF0aW5nIHNob3c6ICR7dGl0bGV9YCk7XG5cbiAgICBjb25zdCBpbnNlcnRTdG10ID0gZGIucHJlcGFyZShgXG4gICAgICBJTlNFUlQgSU5UTyBzaG93cyAodGl0bGUsIHBhdGgsIG92ZXJ2aWV3LCBzb25hcnJfaWQsIHN0YXR1cylcbiAgICAgIFZBTFVFUyAoPywgPywgPywgPywgPylcbiAgICBgKTtcblxuICAgIGNvbnN0IHJlc3VsdCA9IGluc2VydFN0bXQucnVuKHRpdGxlLCBzaG93UGF0aCwgb3ZlcnZpZXcsIHNvbmFycl9pZCwgc3RhdHVzKTtcblxuICAgIGxvZ2dlci5pbmZvKGBTaG93IGNyZWF0ZWQgd2l0aCBJRDogJHtyZXN1bHQubGFzdEluc2VydFJvd2lkfWApO1xuXG4gICAgcmVzLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGlkOiByZXN1bHQubGFzdEluc2VydFJvd2lkLFxuICAgICAgbWVzc2FnZTogJ1Nob3cgY3JlYXRlZCBzdWNjZXNzZnVsbHknLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBzaG93OicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBlcnJvcjogJ0ZhaWxlZCB0byBjcmVhdGUgc2hvdycsXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgIH0pO1xuICB9XG59KTtcblxuLy8gR2V0IHNwZWNpZmljIHNob3cgYnkgSURcbnJvdXRlci5nZXQoJy86aWQnLCAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgZGIgPSByZXEuYXBwLmdldCgnZGInKTtcbiAgY29uc3QgbG9nZ2VyID0gcmVxLmFwcC5nZXQoJ2xvZ2dlcicpO1xuXG4gIHRyeSB7XG4gICAgY29uc3Qgc2hvd0lkID0gcGFyc2VJbnQocmVxLnBhcmFtcy5pZCk7XG5cbiAgICBpZiAoaXNOYU4oc2hvd0lkKSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIHNob3cgSUQnIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHF1ZXJ5ID0gYFxuICAgICAgU0VMRUNUIFxuICAgICAgICBzLmlkLCBcbiAgICAgICAgcy50aXRsZSwgXG4gICAgICAgIHMucGF0aCwgXG4gICAgICAgIHMuc29uYXJyX2lkLFxuICAgICAgICBzLnN0YXR1cyxcbiAgICAgICAgcy5vdmVydmlldyxcbiAgICAgICAgcy5hZGRlZF9hdFxuICAgICAgRlJPTSBzaG93cyBzXG4gICAgICBXSEVSRSBzLmlkID0gP1xuICAgIGA7XG5cbiAgICBjb25zdCBzaG93ID0gZGIucHJlcGFyZShxdWVyeSkuZ2V0KHNob3dJZCk7XG5cbiAgICBpZiAoIXNob3cpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnU2hvdyBub3QgZm91bmQnIH0pO1xuICAgIH1cblxuICAgIGxvZ2dlci5pbmZvKGBSZXRyaWV2ZWQgc2hvdzogJHtzaG93LnRpdGxlfWApO1xuICAgIHJlcy5qc29uKHNob3cpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGZldGNoIHNob3c6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIHNob3cnLFxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICB9KTtcbiAgfVxufSk7XG5cbi8vIFVwZGF0ZSBzaG93XG5yb3V0ZXIucHV0KCcvOmlkJywgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IGRiID0gcmVxLmFwcC5nZXQoJ2RiJyk7XG4gIGNvbnN0IGxvZ2dlciA9IHJlcS5hcHAuZ2V0KCdsb2dnZXInKTtcblxuICB0cnkge1xuICAgIGNvbnN0IHNob3dJZCA9IHBhcnNlSW50KHJlcS5wYXJhbXMuaWQpO1xuICAgIGNvbnN0IHsgdGl0bGUsIHBhdGg6IHNob3dQYXRoLCBvdmVydmlldywgc29uYXJyX2lkLCBzdGF0dXMgfSA9IHJlcS5ib2R5O1xuXG4gICAgaWYgKGlzTmFOKHNob3dJZCkpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBzaG93IElEJyB9KTtcbiAgICB9XG5cbiAgICBjb25zdCB1cGRhdGVTdG10ID0gZGIucHJlcGFyZShgXG4gICAgICBVUERBVEUgc2hvd3MgXG4gICAgICBTRVQgdGl0bGUgPSA/LCBwYXRoID0gPywgb3ZlcnZpZXcgPSA/LCBzb25hcnJfaWQgPSA/LCBzdGF0dXMgPSA/XG4gICAgICBXSEVSRSBpZCA9ID9cbiAgICBgKTtcblxuICAgIGNvbnN0IHJlc3VsdCA9IHVwZGF0ZVN0bXQucnVuKHRpdGxlLCBzaG93UGF0aCwgb3ZlcnZpZXcsIHNvbmFycl9pZCwgc3RhdHVzLCBzaG93SWQpO1xuXG4gICAgaWYgKHJlc3VsdC5jaGFuZ2VzID09PSAwKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ1Nob3cgbm90IGZvdW5kJyB9KTtcbiAgICB9XG5cbiAgICBsb2dnZXIuaW5mbyhgVXBkYXRlZCBzaG93IElEOiAke3Nob3dJZH1gKTtcbiAgICByZXMuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZTogJ1Nob3cgdXBkYXRlZCBzdWNjZXNzZnVsbHknLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIHVwZGF0ZSBzaG93OicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBlcnJvcjogJ0ZhaWxlZCB0byB1cGRhdGUgc2hvdycsXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgIH0pO1xuICB9XG59KTtcblxuLy8gRGVsZXRlIHNob3dcbnJvdXRlci5kZWxldGUoJy86aWQnLCAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgZGIgPSByZXEuYXBwLmdldCgnZGInKTtcbiAgY29uc3QgbG9nZ2VyID0gcmVxLmFwcC5nZXQoJ2xvZ2dlcicpO1xuXG4gIHRyeSB7XG4gICAgY29uc3Qgc2hvd0lkID0gcGFyc2VJbnQocmVxLnBhcmFtcy5pZCk7XG5cbiAgICBpZiAoaXNOYU4oc2hvd0lkKSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIHNob3cgSUQnIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGRlbGV0ZVN0bXQgPSBkYi5wcmVwYXJlKCdERUxFVEUgRlJPTSBzaG93cyBXSEVSRSBpZCA9ID8nKTtcbiAgICBjb25zdCByZXN1bHQgPSBkZWxldGVTdG10LnJ1bihzaG93SWQpO1xuXG4gICAgaWYgKHJlc3VsdC5jaGFuZ2VzID09PSAwKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ1Nob3cgbm90IGZvdW5kJyB9KTtcbiAgICB9XG5cbiAgICBsb2dnZXIuaW5mbyhgRGVsZXRlZCBzaG93IElEOiAke3Nob3dJZH1gKTtcbiAgICByZXMuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZTogJ1Nob3cgZGVsZXRlZCBzdWNjZXNzZnVsbHknLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGRlbGV0ZSBzaG93OicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBlcnJvcjogJ0ZhaWxlZCB0byBkZWxldGUgc2hvdycsXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgIH0pO1xuICB9XG59KTtcblxuLy8gQmF0Y2ggZGVsZXRlIHNob3dzIChjYXNjYWRlOiBlcGlzb2RlX2ZpbGVzLCBlcGlzb2Rlcywgc2Vhc29ucywgc2hvd3MpXG5yb3V0ZXIucG9zdCgnL2RlbGV0ZScsIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCBkYiA9IHJlcS5hcHAuZ2V0KCdkYicpO1xuICBjb25zdCBsb2dnZXIgPSByZXEuYXBwLmdldCgnbG9nZ2VyJyk7XG4gIGNvbnN0IHsgaWRzIH0gPSByZXEuYm9keTtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGlkcykgfHwgaWRzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnaWRzIG11c3QgYmUgYSBub24tZW1wdHkgYXJyYXknIH0pO1xuICB9XG4gIHRyeSB7XG4gICAgZGIudHJhbnNhY3Rpb24oKCkgPT4ge1xuICAgICAgLy8gR2V0IGFsbCBlcGlzb2RlIElEcyBmb3IgdGhlIHNob3dzXG4gICAgICBjb25zdCBlcGlzb2RlUm93cyA9IGRiLnByZXBhcmUoXG4gICAgICAgIGBTRUxFQ1QgZS5pZCBGUk9NIGVwaXNvZGVzIGUgSk9JTiBzZWFzb25zIHMgT04gZS5zZWFzb25faWQgPSBzLmlkIFdIRVJFIHMuc2hvd19pZCBJTiAoJHtpZHMubWFwKCgpID0+ICc/Jykuam9pbignLCcpfSlgLFxuICAgICAgKS5hbGwoLi4uaWRzKTtcbiAgICAgIGNvbnN0IGVwaXNvZGVJZHMgPSBlcGlzb2RlUm93cy5tYXAoKHJvdykgPT4gcm93LmlkKTtcbiAgICAgIGlmIChlcGlzb2RlSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZGIucHJlcGFyZShgREVMRVRFIEZST00gZXBpc29kZV9maWxlcyBXSEVSRSBlcGlzb2RlX2lkIElOICgke2VwaXNvZGVJZHMubWFwKCgpID0+ICc/Jykuam9pbignLCcpfSlgKS5ydW4oLi4uZXBpc29kZUlkcyk7XG4gICAgICB9XG4gICAgICAvLyBPbmx5IHJ1biBpZiB0aGVyZSBhcmUgc2Vhc29ucyBmb3IgdGhlc2Ugc2hvd3NcbiAgICAgIGNvbnN0IHNlYXNvblJvd3MgPSBkYi5wcmVwYXJlKFxuICAgICAgICBgU0VMRUNUIGlkIEZST00gc2Vhc29ucyBXSEVSRSBzaG93X2lkIElOICgke2lkcy5tYXAoKCkgPT4gJz8nKS5qb2luKCcsJyl9KWAsXG4gICAgICApLmFsbCguLi5pZHMpO1xuICAgICAgY29uc3Qgc2Vhc29uSWRzID0gc2Vhc29uUm93cy5tYXAoKHJvdykgPT4gcm93LmlkKTtcbiAgICAgIGlmIChzZWFzb25JZHMubGVuZ3RoID4gMCkge1xuICAgICAgICBkYi5wcmVwYXJlKGBERUxFVEUgRlJPTSBlcGlzb2RlcyBXSEVSRSBzZWFzb25faWQgSU4gKCR7c2Vhc29uSWRzLm1hcCgoKSA9PiAnPycpLmpvaW4oJywnKX0pYCkucnVuKC4uLnNlYXNvbklkcyk7XG4gICAgICB9XG4gICAgICBpZiAoaWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZGIucHJlcGFyZShgREVMRVRFIEZST00gc2Vhc29ucyBXSEVSRSBzaG93X2lkIElOICgke2lkcy5tYXAoKCkgPT4gJz8nKS5qb2luKCcsJyl9KWApLnJ1biguLi5pZHMpO1xuICAgICAgICBkYi5wcmVwYXJlKGBERUxFVEUgRlJPTSBzaG93cyBXSEVSRSBpZCBJTiAoJHtpZHMubWFwKCgpID0+ICc/Jykuam9pbignLCcpfSlgKS5ydW4oLi4uaWRzKTtcbiAgICAgIH1cbiAgICB9KSgpO1xuICAgIGxvZ2dlci5pbmZvKGBDYXNjYWRlIGRlbGV0ZWQgc2hvd3MgYW5kIHJlbGF0ZWQgZGF0YSBmb3IgSURzOiAke2lkc31gKTtcbiAgICByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGRlbGV0ZWQ6IGlkcy5sZW5ndGggfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gY2FzY2FkZSBkZWxldGUgc2hvd3M6JywgZXJyb3IubWVzc2FnZSwgZXJyb3Iuc3RhY2spO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gY2FzY2FkZSBkZWxldGUgc2hvd3MnLCBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLCBzdGFjazogZXJyb3Iuc3RhY2sgfSk7XG4gIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG4iLCAiY29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2Rpcm5hbWUgPSBcIi9ob21lL2QvY2xpcHJyL2NsaXBhcnItbm9kZS9zcmMvcm91dGVzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ZpbGVuYW1lID0gXCIvaG9tZS9kL2NsaXByci9jbGlwYXJyLW5vZGUvc3JjL3JvdXRlcy9zb25hcnIuanNcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfaW1wb3J0X21ldGFfdXJsID0gXCJmaWxlOi8vL2hvbWUvZC9jbGlwcnIvY2xpcGFyci1ub2RlL3NyYy9yb3V0ZXMvc29uYXJyLmpzXCI7Ly8gc3JjL3JvdXRlcy9zb25hcnIuanNcbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uL3NlcnZpY2VzL2xvZ2dlci5qcyc7XG5pbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudic7XG5pbXBvcnQgcHJvY2VzcyBmcm9tICdwcm9jZXNzJztcbmltcG9ydCBXZWJTb2NrZXQgZnJvbSAnd3MnO1xuXG4vLyBMb2FkIGVudmlyb25tZW50IHZhcmlhYmxlc1xuZG90ZW52LmNvbmZpZygpO1xuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxuLy8gVmFsaWRhdGUgZW52aXJvbm1lbnQgdmFyaWFibGVzXG5jb25zdCBTT05BUlJfVVJMID0gcHJvY2Vzcy5lbnYuU09OQVJSX1VSTDtcbmNvbnN0IFNPTkFSUl9BUElfS0VZID0gcHJvY2Vzcy5lbnYuU09OQVJSX0FQSV9LRVk7XG5cbmxvZ2dlci5pbmZvKGBMb2FkZWQgU09OQVJSX1VSTCBmcm9tIGVudjogJHtTT05BUlJfVVJMfWApO1xuaWYgKFNPTkFSUl9BUElfS0VZKSB7XG4gIGxvZ2dlci5pbmZvKFxuICAgIGBMb2FkZWQgU09OQVJSX0FQSV9LRVkgZnJvbSBlbnY6ICR7U09OQVJSX0FQSV9LRVkuc2xpY2UoMCwgNCl9Li4uIChtYXNrZWQpYCxcbiAgKTtcbn0gZWxzZSB7XG4gIGxvZ2dlci53YXJuKCdTT05BUlJfQVBJX0tFWSBpcyBub3Qgc2V0IGluIGVudmlyb25tZW50IHZhcmlhYmxlcyEnKTtcbn1cblxuLy8gQ29uZmlndXJlIGF4aW9zIHdpdGggbG9uZ2VyIHRpbWVvdXQgYW5kIGJldHRlciBlcnJvciBoYW5kbGluZ1xuY29uc3Qgc29uYXJyQ2xpZW50ID0gYXhpb3MuY3JlYXRlKHtcbiAgYmFzZVVSTDogU09OQVJSX1VSTCxcbiAgdGltZW91dDogMTUwMDAsIC8vIDE1IHNlY29uZCB0aW1lb3V0XG4gIGhlYWRlcnM6IHtcbiAgICAnWC1BcGktS2V5JzogU09OQVJSX0FQSV9LRVksXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgfSxcbn0pO1xuXG4vLyBBZGQgcmVzcG9uc2UgaW50ZXJjZXB0b3IgZm9yIGJldHRlciBlcnJvciBoYW5kbGluZ1xuc29uYXJyQ2xpZW50LmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoXG4gIChyZXNwb25zZSkgPT4gcmVzcG9uc2UsXG4gIChlcnJvcikgPT4ge1xuICAgIGlmIChlcnJvci5jb2RlID09PSAnRUNPTk5BQk9SVEVEJykge1xuICAgICAgbG9nZ2VyLmVycm9yKCdTb25hcnIgQVBJIHJlcXVlc3QgdGltZWQgb3V0Jyk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdTb25hcnIgQVBJIHJlcXVlc3QgdGltZWQgb3V0LiBQbGVhc2UgY2hlY2sgaWYgU29uYXJyIGlzIHJ1bm5pbmcgYW5kIGFjY2Vzc2libGUuJyxcbiAgICAgICk7XG4gICAgfVxuICAgIGlmIChlcnJvci5yZXNwb25zZSkge1xuICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcignSW52YWxpZCBTb25hcnIgQVBJIGtleScpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgJ0ludmFsaWQgU29uYXJyIEFQSSBrZXkuIFBsZWFzZSBjaGVjayB5b3VyIFNPTkFSUl9BUElfS0VZIGVudmlyb25tZW50IHZhcmlhYmxlLicsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBsb2dnZXIuZXJyb3IoXG4gICAgICAgIHtcbiAgICAgICAgICBzdGF0dXM6IGVycm9yLnJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICBkYXRhOiBlcnJvci5yZXNwb25zZS5kYXRhLFxuICAgICAgICB9LFxuICAgICAgICAnU29uYXJyIEFQSSBlcnJvciByZXNwb25zZScsXG4gICAgICApO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnU29uYXJyIEFQSSBlcnJvcjogJyArXG4gICAgICAgIGVycm9yLnJlc3BvbnNlLnN0YXR1cyArXG4gICAgICAgICcgLSAnICtcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoZXJyb3IucmVzcG9uc2UuZGF0YSksXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoZXJyb3IucmVxdWVzdCkge1xuICAgICAgbG9nZ2VyLmVycm9yKCdObyByZXNwb25zZSByZWNlaXZlZCBmcm9tIFNvbmFyciBBUEknKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ05vIHJlc3BvbnNlIGZyb20gU29uYXJyIEFQSSBhdCAnICtcbiAgICAgICAgU09OQVJSX1VSTCArXG4gICAgICAgICcuIFBsZWFzZSBjaGVjayBpZiBTb25hcnIgaXMgcnVubmluZyBhbmQgYWNjZXNzaWJsZS4nLFxuICAgICAgKTtcbiAgICB9XG4gICAgbG9nZ2VyLmVycm9yKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSwgJ1NvbmFyciBBUEkgcmVxdWVzdCBmYWlsZWQnKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfSxcbik7XG5cbi8vIFRlc3QgU29uYXJyIGNvbm5lY3Rpb24gb24gc3RhcnR1cFxuY29uc3QgdGVzdFNvbmFyckNvbm5lY3Rpb24gPSBhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgbG9nZ2VyLmluZm8oYFRlc3RpbmcgY29ubmVjdGlvbiB0byBTb25hcnIgYXQgJHtTT05BUlJfVVJMfWApO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc29uYXJyQ2xpZW50LmdldCgnL2FwaS92My9zeXN0ZW0vc3RhdHVzJyk7XG4gICAgbG9nZ2VyLmluZm8oJ1N1Y2Nlc3NmdWxseSBjb25uZWN0ZWQgdG8gU29uYXJyIEFQSScpO1xuICAgIGxvZ2dlci5kZWJ1Zyh7IHZlcnNpb246IHJlc3BvbnNlLmRhdGEudmVyc2lvbiB9LCAnU29uYXJyIHZlcnNpb24nKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBjb25uZWN0IHRvIFNvbmFyciBBUEk6JywgZXJyb3IubWVzc2FnZSk7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn07XG5cbi8vIFRlc3QgY29ubmVjdGlvbiBpbW1lZGlhdGVseVxudGVzdFNvbmFyckNvbm5lY3Rpb24oKS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgbG9nZ2VyLmVycm9yKCdTb25hcnIgQVBJIGNvbm5lY3Rpb24gdGVzdCBmYWlsZWQ6JywgZXJyb3IubWVzc2FnZSk7XG59KTtcblxuLy8gR2V0IHVuaW1wb3J0ZWQgc2hvd3MgZnJvbSBTb25hcnJcbnJvdXRlci5nZXQoJy91bmltcG9ydGVkJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgbG9nZ2VyLmluZm8oJ0ZldGNoaW5nIHVuaW1wb3J0ZWQgc2hvd3MgZnJvbSBTb25hcnInKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNvbmFyckNsaWVudC5nZXQoJy9hcGkvdjMvc2VyaWVzJyk7XG4gICAgY29uc3Qgc2hvd3MgPSByZXNwb25zZS5kYXRhO1xuXG4gICAgLy8gRmlsdGVyIG91dCBzaG93cyB0aGF0IGFyZSBhbHJlYWR5IGltcG9ydGVkXG4gICAgY29uc3QgZGIgPSByZXEuYXBwLmdldCgnZGInKTtcbiAgICBjb25zdCBpbXBvcnRlZFNob3dzID0gZGIucHJlcGFyZSgnU0VMRUNUIHNvbmFycl9pZCBGUk9NIHNob3dzJykuYWxsKCk7XG4gICAgY29uc3QgaW1wb3J0ZWRJZHMgPSBuZXcgU2V0KGltcG9ydGVkU2hvd3MubWFwKChzaG93KSA9PiBzaG93LnNvbmFycl9pZCkpO1xuXG4gICAgY29uc3QgdW5pbXBvcnRlZFNob3dzID0gc2hvd3MuZmlsdGVyKChzaG93KSA9PiAhaW1wb3J0ZWRJZHMuaGFzKHNob3cuaWQpKTtcblxuICAgIGxvZ2dlci5pbmZvKGBGb3VuZCAke3VuaW1wb3J0ZWRTaG93cy5sZW5ndGh9IHVuaW1wb3J0ZWQgc2hvd3NgKTtcbiAgICByZXMuanNvbih1bmltcG9ydGVkU2hvd3MpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0sICdGYWlsZWQgdG8gZmV0Y2ggdW5pbXBvcnRlZCBzaG93cycpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIHVuaW1wb3J0ZWQgc2hvd3MnLFxuICAgICAgZGV0YWlsczogZXJyb3IubWVzc2FnZSxcbiAgICB9KTtcbiAgfVxufSk7XG5cbi8vIC0tLSBSRUZBQ1RPUjogRXh0cmFjdCBpbXBvcnQgbG9naWMgdG8gYSBmdW5jdGlvbiAtLS1cbmFzeW5jIGZ1bmN0aW9uIGltcG9ydFNob3dCeUlkKHNob3dJZCwgcmVxLCB3c3MsIGRiKSB7XG4gIHRyeSB7XG4gICAgbG9nZ2VyLmluZm8oYFN0YXJ0aW5nIGltcG9ydCBmb3Igc2hvdyBJRDogJHtzaG93SWR9YCk7XG5cbiAgICAvLyBTZW5kIGluaXRpYWwgcHJvZ3Jlc3NcbiAgICB3c3MuY2xpZW50cy5mb3JFYWNoKChjbGllbnQpID0+IHtcbiAgICAgIGlmIChjbGllbnQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4pIHtcbiAgICAgICAgY2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHR5cGU6ICdpbXBvcnRfcHJvZ3Jlc3MnLFxuICAgICAgICAgIHNob3dJZCxcbiAgICAgICAgICBzdGF0dXM6ICdzdGFydGVkJyxcbiAgICAgICAgICBtZXNzYWdlOiAnU3RhcnRpbmcgaW1wb3J0IHByb2Nlc3MuLi4nLFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBHZXQgc2hvdyBkZXRhaWxzIGZyb20gU29uYXJyXG4gICAgY29uc3Qgc2hvd1Jlc3BvbnNlID0gYXdhaXQgc29uYXJyQ2xpZW50LmdldChgL2FwaS92My9zZXJpZXMvJHtzaG93SWR9YCk7XG4gICAgY29uc3Qgc2hvdyA9IHNob3dSZXNwb25zZS5kYXRhO1xuICAgIGxvZ2dlci5pbmZvKHsgc2hvdyB9LCAnRmV0Y2hlZCBzaG93IGRldGFpbHMgZnJvbSBTb25hcnInKTtcblxuICAgIC8vIFNlbmQgcHJvZ3Jlc3MgdXBkYXRlXG4gICAgd3NzLmNsaWVudHMuZm9yRWFjaCgoY2xpZW50KSA9PiB7XG4gICAgICBpZiAoY2xpZW50LnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICAgIGNsaWVudC5zZW5kKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICB0eXBlOiAnaW1wb3J0X3Byb2dyZXNzJyxcbiAgICAgICAgICBzaG93SWQsXG4gICAgICAgICAgc3RhdHVzOiAnZmV0Y2hpbmdfZXBpc29kZXMnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdGZXRjaGluZyBlcGlzb2Rlcy4uLicsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEdldCBlcGlzb2RlcyBmb3IgdGhlIHNob3dcbiAgICBjb25zdCBlcGlzb2RlUmVzcG9uc2UgPSBhd2FpdCBzb25hcnJDbGllbnQuZ2V0KGAvYXBpL3YzL2VwaXNvZGU/c2VyaWVzSWQ9JHtzaG93SWR9YCk7XG4gICAgY29uc3QgZXBpc29kZXMgPSBlcGlzb2RlUmVzcG9uc2UuZGF0YTtcbiAgICBsb2dnZXIuaW5mbyhcbiAgICAgIHsgZXBpc29kZUNvdW50OiBlcGlzb2Rlcy5sZW5ndGgsIGVwaXNvZGVzOiBlcGlzb2Rlcy5zbGljZSgwLCAzKSB9LFxuICAgICAgJ0ZldGNoZWQgZXBpc29kZXMgZnJvbSBTb25hcnIgKHNob3dpbmcgZmlyc3QgMyknLFxuICAgICk7XG5cbiAgICAvLyBHcm91cCBlcGlzb2RlcyBieSBzZWFzb25cbiAgICBjb25zdCBzZWFzb25zID0ge307XG4gICAgZXBpc29kZXMuZm9yRWFjaCgoZXBpc29kZSkgPT4ge1xuICAgICAgaWYgKCFzZWFzb25zW2VwaXNvZGUuc2Vhc29uTnVtYmVyXSkge1xuICAgICAgICBzZWFzb25zW2VwaXNvZGUuc2Vhc29uTnVtYmVyXSA9IHtcbiAgICAgICAgICBzZWFzb25OdW1iZXI6IGVwaXNvZGUuc2Vhc29uTnVtYmVyLFxuICAgICAgICAgIGVwaXNvZGVzOiBbXSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHNlYXNvbnNbZXBpc29kZS5zZWFzb25OdW1iZXJdLmVwaXNvZGVzLnB1c2goZXBpc29kZSk7XG4gICAgfSk7XG5cbiAgICBsb2dnZXIuaW5mbyh7IHNlYXNvbkNvdW50OiBPYmplY3Qua2V5cyhzZWFzb25zKS5sZW5ndGggfSwgJ1ByZXBhcmVkIHNlYXNvbnMgZ3JvdXBpbmcnKTtcblxuICAgIC8vIFNlbmQgcHJvZ3Jlc3MgdXBkYXRlXG4gICAgd3NzLmNsaWVudHMuZm9yRWFjaCgoY2xpZW50KSA9PiB7XG4gICAgICBpZiAoY2xpZW50LnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICAgIGNsaWVudC5zZW5kKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICB0eXBlOiAnaW1wb3J0X3Byb2dyZXNzJyxcbiAgICAgICAgICBzaG93SWQsXG4gICAgICAgICAgc3RhdHVzOiAnaW1wb3J0aW5nJyxcbiAgICAgICAgICBtZXNzYWdlOiBgSW1wb3J0aW5nICR7T2JqZWN0LmtleXMoc2Vhc29ucykubGVuZ3RofSBzZWFzb25zLi4uYCxcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gVXNlIGEgdHJhbnNhY3Rpb24gZm9yIGRhdGEgY29uc2lzdGVuY3lcbiAgICB0cnkge1xuICAgICAgbG9nZ2VyLmluZm8oJ0JlZ2lubmluZyBkYXRhYmFzZSB0cmFuc2FjdGlvbiBmb3IgaW1wb3J0Jyk7XG4gICAgICBkYi50cmFuc2FjdGlvbigoKSA9PiB7XG4gICAgICAgIC8vIEluc2VydCB0aGUgc2hvd1xuICAgICAgICBsb2dnZXIuaW5mbyhcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzaG93SW5zZXJ0OiB7XG4gICAgICAgICAgICAgIHNvbmFycl9pZDogc2hvdy5pZCxcbiAgICAgICAgICAgICAgdGl0bGU6IHNob3cudGl0bGUsXG4gICAgICAgICAgICAgIG92ZXJ2aWV3OiBzaG93Lm92ZXJ2aWV3LFxuICAgICAgICAgICAgICBwYXRoOiBzaG93LnBhdGgsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgJ0luc2VydGluZyBzaG93JyxcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3Qgc2hvd1Jlc3VsdCA9IGRiLnByZXBhcmUoYFxuICAgICAgICAgIElOU0VSVCBPUiBSRVBMQUNFIElOVE8gc2hvd3MgKFxuICAgICAgICAgICAgc29uYXJyX2lkLCB0aXRsZSwgb3ZlcnZpZXcsIHBhdGhcbiAgICAgICAgICApIFZBTFVFUyAoPywgPywgPywgPylcbiAgICAgICAgYCkucnVuKFxuICAgICAgICAgIHNob3cuaWQsXG4gICAgICAgICAgc2hvdy50aXRsZSxcbiAgICAgICAgICBzaG93Lm92ZXJ2aWV3LFxuICAgICAgICAgIHNob3cucGF0aCxcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBJbnNlcnQgc2Vhc29ucyBhbmQgZXBpc29kZXNcbiAgICAgICAgT2JqZWN0LnZhbHVlcyhzZWFzb25zKS5mb3JFYWNoKChzZWFzb24pID0+IHtcbiAgICAgICAgICBsb2dnZXIuaW5mbyhcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc2Vhc29uSW5zZXJ0OiB7XG4gICAgICAgICAgICAgICAgc2hvd19pZDogc2hvd1Jlc3VsdC5sYXN0SW5zZXJ0Um93aWQsXG4gICAgICAgICAgICAgICAgc2Vhc29uX251bWJlcjogc2Vhc29uLnNlYXNvbk51bWJlcixcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnSW5zZXJ0aW5nIHNlYXNvbicsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zdCBzZWFzb25SZXN1bHQgPSBkYi5wcmVwYXJlKGBcbiAgICAgICAgICAgIElOU0VSVCBPUiBJR05PUkUgSU5UTyBzZWFzb25zIChcbiAgICAgICAgICAgICAgc2hvd19pZCwgc2Vhc29uX251bWJlclxuICAgICAgICAgICAgKSBWQUxVRVMgKD8sID8pXG4gICAgICAgICAgYCkucnVuKFxuICAgICAgICAgICAgc2hvd1Jlc3VsdC5sYXN0SW5zZXJ0Um93aWQsXG4gICAgICAgICAgICBzZWFzb24uc2Vhc29uTnVtYmVyLFxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBzZWFzb24uZXBpc29kZXMuZm9yRWFjaCgoZXBpc29kZSkgPT4ge1xuICAgICAgICAgICAgbG9nZ2VyLmluZm8oXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBlcGlzb2RlSW5zZXJ0OiB7XG4gICAgICAgICAgICAgICAgICBzZWFzb25faWQ6IHNlYXNvblJlc3VsdC5sYXN0SW5zZXJ0Um93aWQsXG4gICAgICAgICAgICAgICAgICBlcGlzb2RlX251bWJlcjogZXBpc29kZS5lcGlzb2RlTnVtYmVyLFxuICAgICAgICAgICAgICAgICAgdGl0bGU6IGVwaXNvZGUudGl0bGUsXG4gICAgICAgICAgICAgICAgICBzb25hcnJfZXBpc29kZV9pZDogZXBpc29kZS5pZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAnSW5zZXJ0aW5nIGVwaXNvZGUnLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGRiLnByZXBhcmUoYFxuICAgICAgICAgICAgICBJTlNFUlQgT1IgUkVQTEFDRSBJTlRPIGVwaXNvZGVzIChcbiAgICAgICAgICAgICAgICBzZWFzb25faWQsIGVwaXNvZGVfbnVtYmVyLCB0aXRsZSwgc29uYXJyX2VwaXNvZGVfaWRcbiAgICAgICAgICAgICAgKSBWQUxVRVMgKD8sID8sID8sID8pXG4gICAgICAgICAgICBgKS5ydW4oXG4gICAgICAgICAgICAgIHNlYXNvblJlc3VsdC5sYXN0SW5zZXJ0Um93aWQsXG4gICAgICAgICAgICAgIGVwaXNvZGUuZXBpc29kZU51bWJlcixcbiAgICAgICAgICAgICAgZXBpc29kZS50aXRsZSxcbiAgICAgICAgICAgICAgZXBpc29kZS5pZCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSkoKTtcbiAgICAgIGxvZ2dlci5pbmZvKCdEYXRhYmFzZSB0cmFuc2FjdGlvbiBmb3IgaW1wb3J0IGNvbXBsZXRlZCBzdWNjZXNzZnVsbHknKTtcblxuICAgICAgLy8gU2VuZCBjb21wbGV0aW9uIHVwZGF0ZVxuICAgICAgd3NzLmNsaWVudHMuZm9yRWFjaCgoY2xpZW50KSA9PiB7XG4gICAgICAgIGlmIChjbGllbnQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4pIHtcbiAgICAgICAgICBjbGllbnQuc2VuZChKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICB0eXBlOiAnaW1wb3J0X3Byb2dyZXNzJyxcbiAgICAgICAgICAgIHNob3dJZCxcbiAgICAgICAgICAgIHN0YXR1czogJ2NvbXBsZXRlZCcsXG4gICAgICAgICAgICBtZXNzYWdlOiAnSW1wb3J0IGNvbXBsZXRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgc2hvd0lkIH07XG4gICAgfSBjYXRjaCAodHhFcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFxuICAgICAgICB7IHR4RXJyb3I6IHR4RXJyb3Iuc3RhY2sgfHwgdHhFcnJvciB9LFxuICAgICAgICAnRGF0YWJhc2UgdHJhbnNhY3Rpb24gZmFpbGVkIGR1cmluZyBpbXBvcnQnLFxuICAgICAgKTtcblxuICAgICAgLy8gU2VuZCBlcnJvciB1cGRhdGVcbiAgICAgIHdzcy5jbGllbnRzLmZvckVhY2goKGNsaWVudCkgPT4ge1xuICAgICAgICBpZiAoY2xpZW50LnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICAgICAgY2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgdHlwZTogJ2ltcG9ydF9wcm9ncmVzcycsXG4gICAgICAgICAgICBzaG93SWQsXG4gICAgICAgICAgICBzdGF0dXM6ICdlcnJvcicsXG4gICAgICAgICAgICBtZXNzYWdlOiAnSW1wb3J0IGZhaWxlZDogJyArIHR4RXJyb3IubWVzc2FnZSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBzaG93SWQsIGVycm9yOiB0eEVycm9yLm1lc3NhZ2UgfTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSwgJ0ZhaWxlZCB0byBpbXBvcnQgc2hvdycpO1xuICAgIC8vIERvbid0IHRocm93LCBqdXN0IHJldHVybiBlcnJvciBvYmplY3RcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgc2hvd0lkLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xuICB9XG59XG5cbi8vIC0tLSBTaW5nbGUgaW1wb3J0IHJvdXRlIC0tLVxucm91dGVyLnBvc3QoJy9pbXBvcnQvOmlkJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGlmICghcmVxLmFwcC5nZXQoJ2RiJykpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0RhdGFiYXNlIGluc3RhbmNlIGlzIG5vdCBzZXQgb24gYXBwJyk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdEYXRhYmFzZSBub3QgaW5pdGlhbGl6ZWQnIH0pO1xuICB9XG4gIGlmICghbG9nZ2VyKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdMb2dnZXIgaXMgbm90IHNldCBvbiBhcHAnKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0xvZ2dlciBub3QgaW5pdGlhbGl6ZWQnIH0pO1xuICB9XG4gIGlmICghc29uYXJyQ2xpZW50KSB7XG4gICAgbG9nZ2VyLmVycm9yKCdTb25hcnIgY2xpZW50IGlzIG5vdCBzZXQgb24gYXBwJyk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdTb25hcnIgY2xpZW50IG5vdCBpbml0aWFsaXplZCcgfSk7XG4gIH1cbiAgdHJ5IHtcbiAgICBjb25zdCBzaG93SWQgPSByZXEucGFyYW1zLmlkO1xuICAgIGNvbnN0IHdzcyA9IHJlcS5hcHAuZ2V0KCd3c3MnKTtcbiAgICBjb25zdCBkYiA9IHJlcS5hcHAuZ2V0KCdkYicpO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGltcG9ydFNob3dCeUlkKHNob3dJZCwgcmVxLCB3c3MsIGRiKTtcbiAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgIHJlcy5qc29uKHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogJ1Nob3cgaW1wb3J0ZWQgc3VjY2Vzc2Z1bGx5JyB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogcmVzdWx0LmVycm9yIH0pO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xuICB9XG59KTtcblxuLy8gLS0tIEJhdGNoIGltcG9ydCByb3V0ZSAtLS1cbnJvdXRlci5wb3N0KCcvaW1wb3J0JywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGlmICghcmVxLmFwcC5nZXQoJ2RiJykpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0RhdGFiYXNlIGluc3RhbmNlIGlzIG5vdCBzZXQgb24gYXBwJyk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdEYXRhYmFzZSBub3QgaW5pdGlhbGl6ZWQnIH0pO1xuICB9XG4gIGlmICghbG9nZ2VyKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdMb2dnZXIgaXMgbm90IHNldCBvbiBhcHAnKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogJ0xvZ2dlciBub3QgaW5pdGlhbGl6ZWQnIH0pO1xuICB9XG4gIGlmICghc29uYXJyQ2xpZW50KSB7XG4gICAgbG9nZ2VyLmVycm9yKCdTb25hcnIgY2xpZW50IGlzIG5vdCBzZXQgb24gYXBwJyk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdTb25hcnIgY2xpZW50IG5vdCBpbml0aWFsaXplZCcgfSk7XG4gIH1cbiAgY29uc3QgeyBzaG93SWRzIH0gPSByZXEuYm9keTtcbiAgaWYgKCFBcnJheS5pc0FycmF5KHNob3dJZHMpIHx8IHNob3dJZHMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdzaG93SWRzIG11c3QgYmUgYSBub24tZW1wdHkgYXJyYXknIH0pO1xuICB9XG4gIGNvbnN0IHdzcyA9IHJlcS5hcHAuZ2V0KCd3c3MnKTtcbiAgY29uc3QgZGIgPSByZXEuYXBwLmdldCgnZGInKTtcbiAgY29uc3QgcmVzdWx0cyA9IFtdO1xuICBmb3IgKGNvbnN0IHNob3dJZCBvZiBzaG93SWRzKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaW1wb3J0U2hvd0J5SWQoc2hvd0lkLCByZXEsIHdzcywgZGIpO1xuICAgIHJlc3VsdHMucHVzaChyZXN1bHQpO1xuICB9XG4gIHJlcy5qc29uKHtcbiAgICBpbXBvcnRlZENvdW50OiByZXN1bHRzLmZpbHRlcigocikgPT4gci5zdWNjZXNzKS5sZW5ndGgsXG4gICAgcmVzdWx0cyxcbiAgfSk7XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xuIiwgImNvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9kaXJuYW1lID0gXCIvaG9tZS9kL2NsaXByci9jbGlwYXJyLW5vZGUvc3JjL2RhdGFiYXNlXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ZpbGVuYW1lID0gXCIvaG9tZS9kL2NsaXByci9jbGlwYXJyLW5vZGUvc3JjL2RhdGFiYXNlL1NjaGVtYS5tanNcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfaW1wb3J0X21ldGFfdXJsID0gXCJmaWxlOi8vL2hvbWUvZC9jbGlwcnIvY2xpcGFyci1ub2RlL3NyYy9kYXRhYmFzZS9TY2hlbWEubWpzXCI7Ly8gc3JjL2RhdGFiYXNlL3NjaGVtYS5qc1xuXG4vLyAxKSBEZWZpbmUgeW91ciBTUUwgc3RhdGVtZW50cyBpbiBvbmUgcGxhY2U6XG5jb25zdCBTVEFURU1FTlRTID0gW1xuICAgIC8vIHRhYmxlc1xuICAgIGBcbiAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBzaG93cyAoXG4gICAgICBpZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXG4gICAgICB0aXRsZSBURVhUIE5PVCBOVUxMLFxuICAgICAgc29uYXJyX2lkIElOVEVHRVIgVU5JUVVFLFxuICAgICAgcGF0aCBURVhULFxuICAgICAgb3ZlcnZpZXcgVEVYVCxcbiAgICAgIHN0YXR1cyBURVhULFxuICAgICAgYWRkZWRfYXQgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVBcbiAgICApYCxcbiAgICBgXG4gICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgc2Vhc29ucyAoXG4gICAgICBpZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXG4gICAgICBzaG93X2lkIElOVEVHRVIsXG4gICAgICBzZWFzb25fbnVtYmVyIElOVEVHRVIsXG4gICAgICBtb25pdG9yZWQgQk9PTEVBTiBERUZBVUxUIDEsXG4gICAgICBGT1JFSUdOIEtFWSAoc2hvd19pZCkgUkVGRVJFTkNFUyBzaG93cyhpZCkgT04gREVMRVRFIENBU0NBREUsXG4gICAgICBVTklRVUUoc2hvd19pZCwgc2Vhc29uX251bWJlcilcbiAgICApYCxcbiAgICBgXG4gICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgZXBpc29kZXMgKFxuICAgICAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxuICAgICAgc2Vhc29uX2lkIElOVEVHRVIsXG4gICAgICBzb25hcnJfZXBpc29kZV9pZCBJTlRFR0VSIFVOSVFVRSxcbiAgICAgIGVwaXNvZGVfbnVtYmVyIElOVEVHRVIsXG4gICAgICB0aXRsZSBURVhULFxuICAgICAgbW9uaXRvcmVkIEJPT0xFQU4gREVGQVVMVCAxLFxuICAgICAgRk9SRUlHTiBLRVkgKHNlYXNvbl9pZCkgUkVGRVJFTkNFUyBzZWFzb25zKGlkKSBPTiBERUxFVEUgQ0FTQ0FERVxuICAgIClgLFxuICAgIGBcbiAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBlcGlzb2RlX2ZpbGVzIChcbiAgICAgIGlkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcbiAgICAgIGVwaXNvZGVfaWQgSU5URUdFUixcbiAgICAgIGZpbGVfcGF0aCBURVhULFxuICAgICAgc2l6ZSBJTlRFR0VSLFxuICAgICAgcXVhbGl0eSBURVhULFxuICAgICAgRk9SRUlHTiBLRVkgKGVwaXNvZGVfaWQpIFJFRkVSRU5DRVMgZXBpc29kZXMoaWQpIE9OIERFTEVURSBDQVNDQURFXG4gICAgKWAsXG4gICAgYFxuICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHNldHRpbmdzIChcbiAgICAgIGtleSBURVhUIFBSSU1BUlkgS0VZLFxuICAgICAgdmFsdWUgVEVYVFxuICAgIClgLFxuICBcbiAgICAvLyBpbmRleGVzXG4gICAgYENSRUFURSBJTkRFWCBJRiBOT1QgRVhJU1RTIGlkeF9zaG93c190aXRsZSAgICAgICAgICAgIE9OIHNob3dzKHRpdGxlIENPTExBVEUgTk9DQVNFKWAsXG4gICAgYENSRUFURSBJTkRFWCBJRiBOT1QgRVhJU1RTIGlkeF9zaG93c19zb25hcnJfaWQgICAgICAgIE9OIHNob3dzKHNvbmFycl9pZClgLFxuICAgIGBDUkVBVEUgSU5ERVggSUYgTk9UIEVYSVNUUyBpZHhfc2Vhc29uc19zaG93X2lkICAgICAgICBPTiBzZWFzb25zKHNob3dfaWQpYCxcbiAgICBgQ1JFQVRFIElOREVYIElGIE5PVCBFWElTVFMgaWR4X2VwaXNvZGVzX3NlYXNvbl9pZCAgICAgT04gZXBpc29kZXMoc2Vhc29uX2lkKWAsXG4gICAgYENSRUFURSBJTkRFWCBJRiBOT1QgRVhJU1RTIGlkeF9lcGlzb2Rlc19zb25hcnJfZXBfaWQgIE9OIGVwaXNvZGVzKHNvbmFycl9lcGlzb2RlX2lkKWBcbiAgXTtcbiAgXG4gIC8vIDIpIEV4cG9ydCBib3RoIHRoZSByYXcgbGlzdCBhbmQgYSBoZWxwZXIgdG8gZ2V0IHRoZW06XG4gIGV4cG9ydCB7IFNUQVRFTUVOVFMgfTtcbiAgZXhwb3J0IGRlZmF1bHQge1xuICAgIGdldEFsbDogKCkgPT4gU1RBVEVNRU5UU1xuICB9O1xuICAiLCAiY29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2Rpcm5hbWUgPSBcIi9ob21lL2QvY2xpcHJyL2NsaXBhcnItbm9kZS9zcmMvZGF0YWJhc2VcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZmlsZW5hbWUgPSBcIi9ob21lL2QvY2xpcHJyL2NsaXBhcnItbm9kZS9zcmMvZGF0YWJhc2UvQXV0b19EQl9TZXR1cC5qc1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9pbXBvcnRfbWV0YV91cmwgPSBcImZpbGU6Ly8vaG9tZS9kL2NsaXByci9jbGlwYXJyLW5vZGUvc3JjL2RhdGFiYXNlL0F1dG9fREJfU2V0dXAuanNcIjtpbXBvcnQgRGF0YWJhc2UgZnJvbSAnYmV0dGVyLXNxbGl0ZTMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi4vc2VydmljZXMvbG9nZ2VyLmpzJztcbmltcG9ydCB7IFNUQVRFTUVOVFMgfSBmcm9tICcuL1NjaGVtYS5tanMnO1xuXG5sZXQgZGJJbnN0YW5jZSA9IG51bGw7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREYXRhYmFzZVNpbmdsZXRvbihkYlBhdGgpIHtcbiAgaWYgKGRiSW5zdGFuY2UpIHtcbiAgICByZXR1cm4gZGJJbnN0YW5jZTtcbiAgfVxuXG4gIGxvZ2dlci5pbmZvKHsgZGJQYXRoIH0sICdJbml0aWFsaXppbmcgZGF0YWJhc2UnKTtcbiAgZnMubWtkaXJTeW5jKHBhdGguZGlybmFtZShkYlBhdGgpLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcblxuICBkYkluc3RhbmNlID0gbmV3IERhdGFiYXNlKGRiUGF0aCk7XG5cbiAgLy8gQmF0Y2ggUFJBR01BIHNldHRpbmdzXG4gIFsnam91cm5hbF9tb2RlID0gV0FMJywgJ2J1c3lfdGltZW91dCA9IDUwMDAnXVxuICAgIC5mb3JFYWNoKChzZXR0aW5nKSA9PiBkYkluc3RhbmNlLnByYWdtYShzZXR0aW5nKSk7XG5cbiAgLy8gQ3JlYXRlIHNjaGVtYSBpbnNpZGUgYSBzaW5nbGUgdHJhbnNhY3Rpb25cbiAgdHJ5IHtcbiAgICBjb25zdCBpbml0ID0gZGJJbnN0YW5jZS50cmFuc2FjdGlvbigoKSA9PiB7XG4gICAgICBmb3IgKGNvbnN0IHN0bXQgb2YgU1RBVEVNRU5UUykge1xuICAgICAgICBkYkluc3RhbmNlLmV4ZWMoc3RtdCk7XG4gICAgICB9XG4gICAgICAvLyBTZXQgZGVmYXVsdCBzZXR0aW5nc1xuICAgICAgZGJJbnN0YW5jZS5leGVjKFxuICAgICAgICAnSU5TRVJUIE9SIElHTk9SRSBJTlRPIHNldHRpbmdzIChrZXksIHZhbHVlKSBWQUxVRVMgKFxcJ2ltcG9ydF9tb2RlXFwnLCBcXCdub25lXFwnKTsnLFxuICAgICAgKTtcbiAgICAgIGRiSW5zdGFuY2UuZXhlYyhcbiAgICAgICAgJ0lOU0VSVCBPUiBJR05PUkUgSU5UTyBzZXR0aW5ncyAoa2V5LCB2YWx1ZSkgVkFMVUVTIChcXCdwb2xsaW5nX2ludGVydmFsXFwnLCBcXCc5MDBcXCcpOycsXG4gICAgICApO1xuICAgIH0pO1xuICAgIGluaXQoKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgbG9nZ2VyLmVycm9yKHsgZXJyIH0sICdTY2hlbWEgaW5pdGlhbGl6YXRpb24gZmFpbGVkJyk7XG4gICAgdGhyb3cgZXJyO1xuICB9XG5cbiAgbG9nZ2VyLmluZm8oeyBkYlBhdGggfSwgJ0RhdGFiYXNlIGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseScpO1xuICByZXR1cm4gZGJJbnN0YW5jZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsb3NlRGF0YWJhc2UoKSB7XG4gIGlmICghZGJJbnN0YW5jZSkge1xuICAgIHJldHVybjtcbiAgfVxuICBkYkluc3RhbmNlLmNsb3NlKCk7XG4gIGRiSW5zdGFuY2UgPSBudWxsO1xuICBsb2dnZXIuaW5mbygnRGF0YWJhc2UgY29ubmVjdGlvbiBjbG9zZWQnKTtcbn1cbiIsICJjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZGlybmFtZSA9IFwiL2hvbWUvZC9jbGlwcnIvY2xpcGFyci1ub2RlL3NyYy9kYXRhYmFzZVwiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9maWxlbmFtZSA9IFwiL2hvbWUvZC9jbGlwcnIvY2xpcGFyci1ub2RlL3NyYy9kYXRhYmFzZS9EYl9PcGVyYXRpb25zLmpzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCA9IFwiZmlsZTovLy9ob21lL2QvY2xpcHJyL2NsaXBhcnItbm9kZS9zcmMvZGF0YWJhc2UvRGJfT3BlcmF0aW9ucy5qc1wiO2ltcG9ydCB7IGdldERhdGFiYXNlU2luZ2xldG9uIH0gZnJvbSAnLi9BdXRvX0RCX1NldHVwLmpzJztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uL3NlcnZpY2VzL2xvZ2dlci5qcyc7XG5cbmZ1bmN0aW9uIGdldERiKGRiUGF0aCA9ICdkYXRhL2NsaXBhcnIuZGInKSB7XG4gIHJldHVybiBnZXREYXRhYmFzZVNpbmdsZXRvbihkYlBhdGgpO1xufVxuXG5mdW5jdGlvbiB1cHNlcnRSZXR1cm5pbmdJZChkYiwgaW5zZXJ0U3FsLCBpbnNlcnRQYXJhbXMsIHNlbGVjdFNxbCwgc2VsZWN0UGFyYW1zKSB7XG4gIGNvbnN0IHIgPSBkYi5wcmVwYXJlKGluc2VydFNxbCkucnVuKC4uLmluc2VydFBhcmFtcyk7XG4gIHJldHVybiByLmxhc3RJbnNlcnRSb3dpZCB8fCBkYi5wcmVwYXJlKHNlbGVjdFNxbCkuZ2V0KC4uLnNlbGVjdFBhcmFtcykuaWQ7XG59XG5cbmZ1bmN0aW9uIGluc2VydFNob3coZGIsIHNob3cpIHtcbiAgbG9nZ2VyLmluZm8oeyBzaG93SWQ6IHNob3cuaWQgfSwgJ0luc2VydCBzaG93Jyk7XG4gIHJldHVybiB1cHNlcnRSZXR1cm5pbmdJZChcbiAgICBkYixcbiAgICAnSU5TRVJUIE9SIFJFUExBQ0UgSU5UTyBzaG93cyAoc29uYXJyX2lkLCB0aXRsZSwgb3ZlcnZpZXcsIHBhdGgpIFZBTFVFUyAoPywgPywgPywgPyknLFxuICAgIFtzaG93LmlkLCBzaG93LnRpdGxlIHx8ICcnLCBzaG93Lm92ZXJ2aWV3IHx8ICcnLCBzaG93LnBhdGggfHwgJyddLFxuICAgICdTRUxFQ1QgaWQgRlJPTSBzaG93cyBXSEVSRSBzb25hcnJfaWQgPSA/JyxcbiAgICBbc2hvdy5pZF0sXG4gICk7XG59XG5cbmZ1bmN0aW9uIGluc2VydFNlYXNvbihkYiwgc2hvd0lkLCBzZWFzb25OdW1iZXIpIHtcbiAgbG9nZ2VyLmRlYnVnKHsgc2hvd0lkLCBzZWFzb25OdW1iZXIgfSwgJ0luc2VydCBzZWFzb24nKTtcbiAgcmV0dXJuIHVwc2VydFJldHVybmluZ0lkKFxuICAgIGRiLFxuICAgICdJTlNFUlQgT1IgSUdOT1JFIElOVE8gc2Vhc29ucyAoc2hvd19pZCwgc2Vhc29uX251bWJlcikgVkFMVUVTICg/LCA/KScsXG4gICAgW3Nob3dJZCwgc2Vhc29uTnVtYmVyXSxcbiAgICAnU0VMRUNUIGlkIEZST00gc2Vhc29ucyBXSEVSRSBzaG93X2lkID0gPyBBTkQgc2Vhc29uX251bWJlciA9ID8nLFxuICAgIFtzaG93SWQsIHNlYXNvbk51bWJlcl0sXG4gICk7XG59XG5cbmZ1bmN0aW9uIGluc2VydEVwaXNvZGUoZGIsIHNlYXNvbklkLCBlcCkge1xuICBsb2dnZXIuZGVidWcoeyBlcGlzb2RlSWQ6IGVwLmlkIH0sICdJbnNlcnQgZXBpc29kZScpO1xuICByZXR1cm4gdXBzZXJ0UmV0dXJuaW5nSWQoXG4gICAgZGIsXG4gICAgJ0lOU0VSVCBPUiBSRVBMQUNFIElOVE8gZXBpc29kZXMgKHNlYXNvbl9pZCwgZXBpc29kZV9udW1iZXIsIHRpdGxlLCBzb25hcnJfZXBpc29kZV9pZCkgJyArXG4gICAgJ1ZBTFVFUyAoPywgPywgPywgPyknLFxuICAgIFtzZWFzb25JZCwgZXAuZXBpc29kZU51bWJlciB8fCBudWxsLCBlcC50aXRsZSB8fCAnJywgZXAuaWRdLFxuICAgICdTRUxFQ1QgaWQgRlJPTSBlcGlzb2RlcyBXSEVSRSBzb25hcnJfZXBpc29kZV9pZCA9ID8nLFxuICAgIFtlcC5pZF0sXG4gICk7XG59XG5cbmZ1bmN0aW9uIGluc2VydEVwaXNvZGVGaWxlKGRiLCBlcGlzb2RlSWQsIGZpbGUpIHtcbiAgbG9nZ2VyLmRlYnVnKHsgZXBpc29kZUlkLCBwYXRoOiBmaWxlLnBhdGggfSwgJ0luc2VydCBmaWxlJyk7XG4gIHJldHVybiBkYi5wcmVwYXJlKFxuICAgICdJTlNFUlQgSU5UTyBlcGlzb2RlX2ZpbGVzIChlcGlzb2RlX2lkLCBmaWxlX3BhdGgsIHNpemUsIHF1YWxpdHkpIFZBTFVFUyAoPywgPywgPywgPyknLFxuICApLnJ1bihcbiAgICBlcGlzb2RlSWQsXG4gICAgZmlsZS5wYXRoIHx8ICcnLFxuICAgIGZpbGUuc2l6ZSB8fCAwLFxuICAgIGZpbGUucXVhbGl0eT8ucXVhbGl0eT8ubmFtZSB8fCAnVW5rbm93bicsXG4gICkubGFzdEluc2VydFJvd2lkO1xufVxuXG5mdW5jdGlvbiBwcm9jZXNzU2hvd0RhdGEoZGIsIHNob3csIGVwaXNvZGVzID0gW10sIGZpbGVzID0gW10pIHtcbiAgbG9nZ2VyLmluZm8oeyBzaG93SWQ6IHNob3cuaWQsIGNvdW50OiBlcGlzb2Rlcy5sZW5ndGggfSwgJ1Byb2Nlc3Mgc2hvdycpO1xuICByZXR1cm4gZGIudHJhbnNhY3Rpb24oKCkgPT4ge1xuICAgIGNvbnN0IHNob3dEYklkID0gaW5zZXJ0U2hvdyhkYiwgc2hvdyk7XG4gICAgY29uc3Qgc2Vhc29uTWFwID0gbmV3IE1hcCgpLCBlcE1hcCA9IG5ldyBNYXAoKTtcbiAgICBlcGlzb2Rlcy5mb3JFYWNoKChlcCkgPT4ge1xuICAgICAgY29uc3Qgc2lkID0gc2Vhc29uTWFwLmdldChlcC5zZWFzb25OdW1iZXIpXG4gICAgICAgIHx8IGluc2VydFNlYXNvbihkYiwgc2hvd0RiSWQsIGVwLnNlYXNvbk51bWJlcik7XG4gICAgICBzZWFzb25NYXAuc2V0KGVwLnNlYXNvbk51bWJlciwgc2lkKTtcbiAgICAgIGVwTWFwLnNldChlcC5pZCwgaW5zZXJ0RXBpc29kZShkYiwgc2lkLCBlcCkpO1xuICAgIH0pO1xuICAgIGZpbGVzLmZvckVhY2goKGYpID0+IHtcbiAgICAgIGNvbnN0IGVpZCA9IGVwTWFwLmdldChmLmVwaXNvZGVJZCk7XG4gICAgICBpZiAoZWlkKSB7XG4gICAgICAgIGluc2VydEVwaXNvZGVGaWxlKGRiLCBlaWQsIGYpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KSgpO1xufVxuXG5mdW5jdGlvbiBiYXRjaEluc2VydFNob3dzKGRiLCBzaG93cykge1xuICBsb2dnZXIuaW5mbyh7IHNob3dDb3VudDogc2hvd3MubGVuZ3RoIH0sICdCYXRjaCBpbnNlcnQgc2hvd3MnKTtcbiAgcmV0dXJuIGRiLnRyYW5zYWN0aW9uKCgpID0+IHtcbiAgICBjb25zdCBzdG10ID0gZGIucHJlcGFyZShcbiAgICAgICdJTlNFUlQgT1IgSUdOT1JFIElOVE8gc2hvd3MgKHRpdGxlLCBwYXRoLCBzb25hcnJfaWQsIG92ZXJ2aWV3LCBzdGF0dXMpICcgK1xuICAgICAgJ1ZBTFVFUyAoPywgPywgPywgPywgPyknLFxuICAgICk7XG4gICAgc2hvd3MuZm9yRWFjaCgocykgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc3RtdC5ydW4ocy50aXRsZSB8fCAnJywgcy5wYXRoIHx8ICcnLCBzLmlkLCBzLm92ZXJ2aWV3IHx8ICcnLCBzLnN0YXR1cyB8fCAnJyk7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oeyBzaG93SWQ6IHMuaWQgfSwgJ0JhdGNoIGluc2VydCBlcnJvcicpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KSgpO1xufVxuXG5mdW5jdGlvbiBnZXRJbXBvcnRlZFNob3dzKGRiLCBwYWdlID0gMSwgcGFnZVNpemUgPSAxMDApIHtcbiAgY29uc3QgcCA9IE1hdGgubWF4KDEsICtwYWdlKSwgc3ogPSBNYXRoLm1heCgxLCArcGFnZVNpemUpLCBvZmZzZXQgPSAocCAtIDEpICogc3o7XG4gIGxvZ2dlci5pbmZvKHsgcGFnZTogcCwgcGFnZVNpemU6IHN6IH0sICdGZXRjaCBzaG93cycpO1xuICBjb25zdCBzaG93cyA9IGRiLnByZXBhcmUoXG4gICAgYFNFTEVDVCBzLmlkLCBzLnRpdGxlLCBzLnBhdGgsIHMuc29uYXJyX2lkLCBzLnN0YXR1cywgcy5hZGRlZF9hdCxcbiAgICAgICAgICAgIENPVU5UKGUuaWQpIEFTIGVwaXNvZGVfY291bnRcbiAgICAgICBGUk9NIHNob3dzIHNcbiAgTEVGVCBKT0lOIHNlYXNvbnMgc2UgT04gc2Uuc2hvd19pZCA9IHMuaWRcbiAgTEVGVCBKT0lOIGVwaXNvZGVzIGUgT04gZS5zZWFzb25faWQgPSBzZS5pZFxuICAgICAgR1JPVVAgQlkgcy5pZFxuICAgICAgT1JERVIgQlkgcy50aXRsZVxuICAgICAgTElNSVQgPyBPRkZTRVQgP2AsXG4gICkuYWxsKHN6LCBvZmZzZXQpO1xuICBjb25zdCB0b3RhbCA9IGRiLnByZXBhcmUoJ1NFTEVDVCBDT1VOVCgqKSBBUyBjb3VudCBGUk9NIHNob3dzJykuZ2V0KCkuY291bnQ7XG4gIHJldHVybiB7IHNob3dzLCB0b3RhbCwgcGFnZTogcCwgcGFnZVNpemU6IHN6LCB0b3RhbFBhZ2VzOiBNYXRoLmNlaWwodG90YWwgLyBzeikgfTtcbn1cblxuZnVuY3Rpb24gZ2V0U2V0dGluZyhkYiwga2V5LCBkZWZhdWx0VmFsdWUgPSBudWxsKSB7XG4gIGNvbnN0IHJvdyA9IGRiLnByZXBhcmUoJ1NFTEVDVCB2YWx1ZSBGUk9NIHNldHRpbmdzIFdIRVJFIGtleSA9ID8nKS5nZXQoa2V5KTtcbiAgcmV0dXJuIHJvdyA/IHJvdy52YWx1ZSA6IGRlZmF1bHRWYWx1ZTtcbn1cblxuZnVuY3Rpb24gc2V0U2V0dGluZyhkYiwga2V5LCB2YWx1ZSkge1xuICBkYi5wcmVwYXJlKCdJTlNFUlQgT1IgUkVQTEFDRSBJTlRPIHNldHRpbmdzIChrZXksIHZhbHVlKSBWQUxVRVMgKD8sID8pJykucnVuKGtleSwgdmFsdWUpO1xufVxuXG5mdW5jdGlvbiBnZXRTaG93U3RhdHMoZGIsIHNvbmFycklkKSB7XG4gIGNvbnN0IHN0YXRzID0gZGIucHJlcGFyZShcbiAgICBgU0VMRUNUIHMuaWQsIHMudGl0bGUsIHMuc29uYXJyX2lkLCBzLnN0YXR1cyxcbiAgICAgICAgICAgIENPVU5UKERJU1RJTkNUIHNlLmlkKSBBUyBzZWFzb25fY291bnQsXG4gICAgICAgICAgICBDT1VOVChESVNUSU5DVCBlLmlkKSBBUyBlcGlzb2RlX2NvdW50LFxuICAgICAgICAgICAgQ09VTlQoRElTVElOQ1QgZWYuaWQpIEFTIGZpbGVfY291bnRcbiAgICAgICBGUk9NIHNob3dzIHNcbiAgTEVGVCBKT0lOIHNlYXNvbnMgc2UgT04gc2Uuc2hvd19pZCA9IHMuaWRcbiAgTEVGVCBKT0lOIGVwaXNvZGVzIGUgT04gZS5zZWFzb25faWQgPSBzZS5pZFxuICBMRUZUIEpPSU4gZXBpc29kZV9maWxlcyBlZiBPTiBlZi5lcGlzb2RlX2lkID0gZS5pZFxuICAgICAgV0hFUkUgcy5zb25hcnJfaWQgPSA/XG4gICAgICBHUk9VUCBCWSBzLmlkYCxcbiAgKS5nZXQoc29uYXJySWQpO1xuICByZXR1cm4gc3RhdHMgfHwgbnVsbDtcbn1cblxuZnVuY3Rpb24gd2l0aFBlcmZvcm1hbmNlTG9nZ2luZyhuYW1lLCBmbikge1xuICBjb25zdCBzdGFydCA9IHByb2Nlc3MuaHJ0aW1lLmJpZ2ludCgpO1xuICB0cnkge1xuICAgIGxvZ2dlci5pbmZvKHsgb3BlcmF0aW9uOiBuYW1lIH0sICdTdGFydCcpO1xuICAgIGNvbnN0IHJlc3VsdCA9IGZuKCk7XG4gICAgbG9nZ2VyLmluZm8oe1xuICAgICAgb3BlcmF0aW9uOiBuYW1lLFxuICAgICAgZHVyYXRpb246IGAke051bWJlcihwcm9jZXNzLmhydGltZS5iaWdpbnQoKSAtIHN0YXJ0KSAvIDFlNn1tc2AsXG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgIH0sICdEb25lJyk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgbG9nZ2VyLmVycm9yKHtcbiAgICAgIG9wZXJhdGlvbjogbmFtZSxcbiAgICAgIGR1cmF0aW9uOiBgJHtOdW1iZXIocHJvY2Vzcy5ocnRpbWUuYmlnaW50KCkgLSBzdGFydCkgLyAxZTZ9bXNgLFxuICAgICAgZXJyb3I6IGVyci5tZXNzYWdlLFxuICAgIH0sICdGYWlsJyk7XG4gICAgdGhyb3cgZXJyO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldEltcG9ydE1vZGUoZGIpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCByb3cgPSBkYi5wcmVwYXJlKCdTRUxFQ1QgdmFsdWUgRlJPTSBzZXR0aW5ncyBXSEVSRSBrZXkgPSA/JykuZ2V0KCdpbXBvcnRfbW9kZScpO1xuICAgIHJldHVybiByb3cgPyByb3cudmFsdWUgOiAnbm9uZSc7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gZ2V0IGltcG9ydCBtb2RlOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5mdW5jdGlvbiBzZXRJbXBvcnRNb2RlKGRiLCBtb2RlKSB7XG4gIHRyeSB7XG4gICAgZGIucHJlcGFyZSgnSU5TRVJUIE9SIFJFUExBQ0UgSU5UTyBzZXR0aW5ncyAoa2V5LCB2YWx1ZSkgVkFMVUVTICg/LCA/KScpXG4gICAgICAucnVuKCdpbXBvcnRfbW9kZScsIG1vZGUpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIHNldCBpbXBvcnQgbW9kZTonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0UG9sbGluZ0ludGVydmFsKGRiKSB7XG4gIHRyeSB7XG4gICAgY29uc3Qgcm93ID0gZGIucHJlcGFyZSgnU0VMRUNUIHZhbHVlIEZST00gc2V0dGluZ3MgV0hFUkUga2V5ID0gPycpLmdldCgncG9sbGluZ19pbnRlcnZhbCcpO1xuICAgIHJldHVybiByb3cgPyBwYXJzZUludChyb3cudmFsdWUsIDEwKSA6IDkwMDsgLy8gRGVmYXVsdCB0byAxNSBtaW51dGVzICg5MDAgc2Vjb25kcylcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBnZXQgcG9sbGluZyBpbnRlcnZhbDonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2V0UG9sbGluZ0ludGVydmFsKGRiLCBpbnRlcnZhbCkge1xuICB0cnkge1xuICAgIC8vIEVuc3VyZSBpbnRlcnZhbCBpcyBiZXR3ZWVuIDYwIHNlY29uZHMgKDEgbWludXRlKSBhbmQgODY0MDAgc2Vjb25kcyAoMjQgaG91cnMpXG4gICAgY29uc3QgdmFsaWRJbnRlcnZhbCA9IE1hdGgubWF4KDYwLCBNYXRoLm1pbig4NjQwMCwgaW50ZXJ2YWwpKTtcbiAgICBkYi5wcmVwYXJlKCdJTlNFUlQgT1IgUkVQTEFDRSBJTlRPIHNldHRpbmdzIChrZXksIHZhbHVlKSBWQUxVRVMgKD8sID8pJylcbiAgICAgIC5ydW4oJ3BvbGxpbmdfaW50ZXJ2YWwnLCB2YWxpZEludGVydmFsLnRvU3RyaW5nKCkpO1xuICAgIGxvZ2dlci5pbmZvKHsgaW50ZXJ2YWw6IHZhbGlkSW50ZXJ2YWwgfSwgJ1BvbGxpbmcgaW50ZXJ2YWwgdXBkYXRlZCcpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIHNldCBwb2xsaW5nIGludGVydmFsOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5leHBvcnQge1xuICBnZXREYixcbiAgaW5zZXJ0U2hvdyxcbiAgaW5zZXJ0U2Vhc29uLFxuICBpbnNlcnRFcGlzb2RlLFxuICBpbnNlcnRFcGlzb2RlRmlsZSxcbiAgcHJvY2Vzc1Nob3dEYXRhLFxuICBiYXRjaEluc2VydFNob3dzLFxuICBnZXRJbXBvcnRlZFNob3dzLFxuICBnZXRTZXR0aW5nLFxuICBzZXRTZXR0aW5nLFxuICBnZXRTaG93U3RhdHMsXG4gIHdpdGhQZXJmb3JtYW5jZUxvZ2dpbmcsXG4gIGdldEltcG9ydE1vZGUsXG4gIHNldEltcG9ydE1vZGUsXG4gIGdldFBvbGxpbmdJbnRlcnZhbCxcbiAgc2V0UG9sbGluZ0ludGVydmFsLFxuICBsb2dnZXIsXG59O1xuIiwgImNvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9kaXJuYW1lID0gXCIvaG9tZS9kL2NsaXByci9jbGlwYXJyLW5vZGUvc3JjL3JvdXRlc1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9maWxlbmFtZSA9IFwiL2hvbWUvZC9jbGlwcnIvY2xpcGFyci1ub2RlL3NyYy9yb3V0ZXMvc2V0dGluZ3MuanNcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfaW1wb3J0X21ldGFfdXJsID0gXCJmaWxlOi8vL2hvbWUvZC9jbGlwcnIvY2xpcGFyci1ub2RlL3NyYy9yb3V0ZXMvc2V0dGluZ3MuanNcIjsvLyBzcmMvcm91dGVzL3NldHRpbmdzLmpzIC0gU2V0dGluZ3MgQVBJIHJvdXRlc1xuaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuaW1wb3J0IHtcbiAgZ2V0RGIsXG4gIGdldEltcG9ydE1vZGUsXG4gIHNldEltcG9ydE1vZGUsXG4gIGdldFBvbGxpbmdJbnRlcnZhbCxcbiAgc2V0UG9sbGluZ0ludGVydmFsLFxufSBmcm9tICcuLi9kYXRhYmFzZS9EYl9PcGVyYXRpb25zLmpzJztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uL3NlcnZpY2VzL2xvZ2dlci5qcyc7XG5cbi8vIEdFVCBjdXJyZW50IGltcG9ydCBtb2RlXG5yb3V0ZXIuZ2V0KCcvaW1wb3J0LW1vZGUnLCAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgZGIgPSBnZXREYigpO1xuICB0cnkge1xuICAgIGNvbnN0IG1vZGUgPSBnZXRJbXBvcnRNb2RlKGRiKTtcbiAgICByZXMuanNvbih7IG1vZGUgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdldCBpbXBvcnQgbW9kZTonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gZ2V0IGltcG9ydCBtb2RlJyxcbiAgICAgIGRldGFpbHM6IGVycm9yICYmIChlcnJvci5zdGFjayB8fCBlcnJvci5tZXNzYWdlIHx8IGVycm9yKSxcbiAgICB9KTtcbiAgfVxufSk7XG5cbi8vIFBPU1Qgc2V0IGltcG9ydCBtb2RlXG5yb3V0ZXIucG9zdCgnL2ltcG9ydC1tb2RlJywgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IGRiID0gZ2V0RGIoKTtcbiAgY29uc3QgeyBtb2RlIH0gPSByZXEuYm9keTtcbiAgdHJ5IHtcbiAgICBpZiAoIW1vZGUgfHwgIVsnYXV0bycsICdpbXBvcnQnLCAnbm9uZSddLmluY2x1ZGVzKG1vZGUpKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgaW1wb3J0IG1vZGUuJyB9KTtcbiAgICB9XG4gICAgc2V0SW1wb3J0TW9kZShkYiwgbW9kZSk7XG4gICAgcmVzLmpzb24oeyBzdGF0dXM6ICdvaycsIG1vZGUgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHNldCBpbXBvcnQgbW9kZTonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gc2V0IGltcG9ydCBtb2RlJyxcbiAgICAgIGRldGFpbHM6IGVycm9yICYmIChlcnJvci5zdGFjayB8fCBlcnJvci5tZXNzYWdlIHx8IGVycm9yKSxcbiAgICB9KTtcbiAgfVxufSk7XG5cbi8vIEdFVCBjdXJyZW50IHBvbGxpbmcgaW50ZXJ2YWxcbnJvdXRlci5nZXQoJy9wb2xsaW5nLWludGVydmFsJywgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IGRiID0gZ2V0RGIoKTtcbiAgdHJ5IHtcbiAgICBjb25zdCBpbnRlcnZhbCA9IGdldFBvbGxpbmdJbnRlcnZhbChkYik7XG4gICAgbG9nZ2VyLmluZm8oeyBpbnRlcnZhbCB9LCAnR0VUIHBvbGxpbmcgaW50ZXJ2YWwnKTtcbiAgICByZXMuanNvbih7IGludGVydmFsIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGdldCBwb2xsaW5nIGludGVydmFsOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBlcnJvcjogJ0ZhaWxlZCB0byBnZXQgcG9sbGluZyBpbnRlcnZhbCcsXG4gICAgICBkZXRhaWxzOiBlcnJvciAmJiAoZXJyb3Iuc3RhY2sgfHwgZXJyb3IubWVzc2FnZSB8fCBlcnJvciksXG4gICAgfSk7XG4gIH1cbn0pO1xuXG4vLyBQT1NUIHNldCBwb2xsaW5nIGludGVydmFsXG5yb3V0ZXIucG9zdCgnL3BvbGxpbmctaW50ZXJ2YWwnLCAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgZGIgPSBnZXREYigpO1xuICBjb25zdCB7IGludGVydmFsIH0gPSByZXEuYm9keTtcbiAgbG9nZ2VyLmluZm8oeyBpbnRlcnZhbCB9LCAnUE9TVCBwb2xsaW5nIGludGVydmFsJyk7XG4gIHRyeSB7XG4gICAgaWYgKCFpbnRlcnZhbCB8fCBpc05hTihpbnRlcnZhbCkgfHwgaW50ZXJ2YWwgPCA2MCB8fCBpbnRlcnZhbCA+IDg2NDAwKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogJ0ludmFsaWQgcG9sbGluZyBpbnRlcnZhbC4gTXVzdCBiZSBiZXR3ZWVuIDYwIGFuZCA4NjQwMCBzZWNvbmRzLicsXG4gICAgICB9KTtcbiAgICB9XG4gICAgc2V0UG9sbGluZ0ludGVydmFsKGRiLCBwYXJzZUludChpbnRlcnZhbCwgMTApKTtcbiAgICBjb25zdCBzYXZlZEludGVydmFsID0gZ2V0UG9sbGluZ0ludGVydmFsKGRiKTtcbiAgICBsb2dnZXIuaW5mbyh7IHNhdmVkSW50ZXJ2YWwgfSwgJ1NhdmVkIHBvbGxpbmcgaW50ZXJ2YWwnKTtcbiAgICByZXMuanNvbih7IHN0YXR1czogJ29rJywgaW50ZXJ2YWw6IHNhdmVkSW50ZXJ2YWwgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gc2V0IHBvbGxpbmcgaW50ZXJ2YWw6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIGVycm9yOiAnRmFpbGVkIHRvIHNldCBwb2xsaW5nIGludGVydmFsJyxcbiAgICAgIGRldGFpbHM6IGVycm9yICYmIChlcnJvci5zdGFjayB8fCBlcnJvci5tZXNzYWdlIHx8IGVycm9yKSxcbiAgICB9KTtcbiAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiIsICJjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZGlybmFtZSA9IFwiL2hvbWUvZC9jbGlwcnIvY2xpcGFyci1ub2RlL3NyY1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9maWxlbmFtZSA9IFwiL2hvbWUvZC9jbGlwcnIvY2xpcGFyci1ub2RlL3NyYy9hcHAuanNcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfaW1wb3J0X21ldGFfdXJsID0gXCJmaWxlOi8vL2hvbWUvZC9jbGlwcnIvY2xpcGFyci1ub2RlL3NyYy9hcHAuanNcIjsvLyBzcmMvYXBwLmpzXG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCBjb3JzIGZyb20gJy4vbWlkZGxld2FyZS9jb3JzLmpzJztcbmltcG9ydCBoZWFsdGhSb3V0ZXMgZnJvbSAnLi9yb3V0ZXMvaGVhbHRoLmpzJztcbmltcG9ydCBzaG93Um91dGVzIGZyb20gJy4vcm91dGVzL3Nob3dzLmpzJztcbmltcG9ydCBzb25hcnJSb3V0ZXMgZnJvbSAnLi9yb3V0ZXMvc29uYXJyLmpzJztcbmltcG9ydCBzZXR0aW5nc1JvdXRlcyBmcm9tICcuL3JvdXRlcy9zZXR0aW5ncy5qcyc7XG5cbi8qKlxuICogQXNzZW1ibGUgYW5kIHJldHVybiBhbiBFeHByZXNzIGFwcGxpY2F0aW9uLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBkZXBzXG4gKiBAcGFyYW0ge2ltcG9ydCgnYmV0dGVyLXNxbGl0ZTMnKS5EYXRhYmFzZX0gZGVwcy5kYlxuICogQHBhcmFtIHtpbXBvcnQoJ3Bpbm8nKS5CYXNlTG9nZ2VyfSBkZXBzLmxvZ2dlclxuICogQHBhcmFtIHtpbXBvcnQoJ3dzJykuV2ViU29ja2V0U2VydmVyfSBkZXBzLndzc1xuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQXBwKHsgZGIsIGxvZ2dlciwgd3NzIH0pIHtcbiAgY29uc3QgYXBwID0gZXhwcmVzcygpO1xuXG4gIC8vIG1ha2Ugc2hhcmVkIHNlcnZpY2VzIGF2YWlsYWJsZSB2aWEgYXBwLmdldCguLi4pXG4gIGFwcC5zZXQoJ2RiJywgZGIpO1xuICBhcHAuc2V0KCdsb2dnZXInLCBsb2dnZXIpO1xuICBhcHAuc2V0KCd3c3MnLCB3c3MpO1xuXG4gIC8vIGJ1aWx0LWluIG1pZGRsZXdhcmVcbiAgYXBwLnVzZShleHByZXNzLmpzb24oKSk7XG5cbiAgLy8gQ09SUyAodXNlcyBjb25maWcgZnJvbSBzcmMvY29uZmlnL2luZGV4LmpzIHZpYSB5b3VyIGNvcnMgbWlkZGxld2FyZSlcbiAgYXBwLnVzZShjb3JzKTtcblxuICAvLyBtb3VudCByb3V0ZXNcbiAgYXBwLnVzZSgnL2hlYWx0aCcsIGhlYWx0aFJvdXRlcyk7XG4gIGFwcC51c2UoJy9zaG93cycsIHNob3dSb3V0ZXMpO1xuICBhcHAudXNlKCcvc29uYXJyJywgc29uYXJyUm91dGVzKTtcbiAgYXBwLnVzZSgnL3NldHRpbmdzJywgc2V0dGluZ3NSb3V0ZXMpO1xuXG4gIHJldHVybiBhcHA7XG59XG4iLCAiY29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2Rpcm5hbWUgPSBcIi9ob21lL2QvY2xpcHJyL2NsaXBhcnItbm9kZS9zcmMvc2VydmljZXNcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZmlsZW5hbWUgPSBcIi9ob21lL2QvY2xpcHJyL2NsaXBhcnItbm9kZS9zcmMvc2VydmljZXMvd2Vic29ja2V0LmpzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCA9IFwiZmlsZTovLy9ob21lL2QvY2xpcHJyL2NsaXBhcnItbm9kZS9zcmMvc2VydmljZXMvd2Vic29ja2V0LmpzXCI7Ly8gc3JjL3NlcnZpY2VzL3dlYnNvY2tldC5qc1xuaW1wb3J0IHsgV2ViU29ja2V0U2VydmVyIH0gZnJvbSAnd3MnO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi9sb2dnZXIuanMnO1xuXG5sZXQgd3NTZXJ2ZXI7XG5cbi8qKlxuICogSW5pdGlhbGl6ZSBhbmQgYXR0YWNoIGEgV2ViU29ja2V0U2VydmVyIHRvIGFuIGV4aXN0aW5nIEhUVFAoUykgc2VydmVyLlxuICogQHBhcmFtIHtpbXBvcnQoJ2h0dHAnKS5TZXJ2ZXJ9IHNlcnZlciAgXHUyMDE0IHRoZSBIVFRQIHNlcnZlciBpbnN0YW5jZVxuICogQHBhcmFtIHtvYmplY3R9IFtvcHRzXVxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLnBhdGg9Jy93cyddICAgXHUyMDE0IHRoZSBVUkwgcGF0aCBmb3Igd3MgdXBncmFkZXNcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5oZWFydGJlYXQ9MzAwMDBdIFx1MjAxNCBwaW5nIGludGVydmFsIChtcylcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldHVwV2ViU29ja2V0KHNlcnZlciwgeyBwYXRoID0gJy93cycsIGhlYXJ0YmVhdCA9IDMwXzAwMCB9ID0ge30pIHtcbiAgd3NTZXJ2ZXIgPSBuZXcgV2ViU29ja2V0U2VydmVyKHsgc2VydmVyLCBwYXRoIH0pO1xuICBsb2dnZXIuaW5mbyh7IHBhdGggfSwgJ1dlYlNvY2tldFNlcnZlciBsaXN0ZW5pbmcnKTtcblxuICB3c1NlcnZlci5vbignY29ubmVjdGlvbicsICh3cykgPT4ge1xuICAgIGxvZ2dlci5kZWJ1ZygnV2ViU29ja2V0IGNsaWVudCBjb25uZWN0ZWQnKTtcbiAgICB3cy5pc0FsaXZlID0gdHJ1ZTtcblxuICAgIC8vIGhlYXJ0YmVhdFxuICAgIHdzLm9uKCdwb25nJywgKCkgPT4gKHdzLmlzQWxpdmUgPSB0cnVlKSk7XG5cbiAgICB3cy5vbignbWVzc2FnZScsIChyYXcpID0+IHtcbiAgICAgIGxvZ2dlci5kZWJ1Zyh7IHJhdyB9LCAnV1MgbWVzc2FnZScpO1xuICAgICAgLy8gZWNob1xuICAgICAgd3Muc2VuZChKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHR5cGU6ICdlY2hvJyxcbiAgICAgICAgZGF0YTogcmF3LnRvU3RyaW5nKCksXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgfSkpO1xuICAgIH0pO1xuXG4gICAgd3Mub24oJ2Vycm9yJywgKGVycikgPT4ge1xuICAgICAgbG9nZ2VyLmVycm9yKHsgZXJyIH0sICdXZWJTb2NrZXQgZXJyb3InKTtcbiAgICB9KTtcblxuICAgIHdzLm9uKCdjbG9zZScsICgpID0+IHtcbiAgICAgIGxvZ2dlci5kZWJ1ZygnV2ViU29ja2V0IGRpc2Nvbm5lY3RlZCcpO1xuICAgIH0pO1xuXG4gICAgLy8gd2VsY29tZSBwYXlsb2FkXG4gICAgd3Muc2VuZChKU09OLnN0cmluZ2lmeSh7XG4gICAgICB0eXBlOiAnd2VsY29tZScsXG4gICAgICBtZXNzYWdlOiAnQ29ubmVjdGVkIHRvIENsaXBhcnIgYmFja2VuZCcsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB9KSk7XG4gIH0pO1xuXG4gIC8vIHBpbmdcdTIwMTBwb25nIHRvIGRyb3AgZGVhZCBjb25uZWN0aW9uc1xuICBjb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICB3c1NlcnZlci5jbGllbnRzLmZvckVhY2goKHdzKSA9PiB7XG4gICAgICBpZiAoIXdzLmlzQWxpdmUpIHtcbiAgICAgICAgcmV0dXJuIHdzLnRlcm1pbmF0ZSgpO1xuICAgICAgfVxuICAgICAgd3MuaXNBbGl2ZSA9IGZhbHNlO1xuICAgICAgd3MucGluZygpO1xuICAgIH0pO1xuICB9LCBoZWFydGJlYXQpO1xuXG4gIHdzU2VydmVyLm9uKCdjbG9zZScsICgpID0+IGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpKTtcblxuICBsb2dnZXIuaW5mbygnV2ViU29ja2V0IHNlcnZlciBpbml0aWFsaXplZCcpO1xufVxuXG4vKiogR2V0IHRoZSBydW5uaW5nIFdlYlNvY2tldFNlcnZlciBpbnN0YW5jZSAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFdlYlNvY2tldFNlcnZlcigpIHtcbiAgcmV0dXJuIHdzU2VydmVyO1xufVxuIiwgImNvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9kaXJuYW1lID0gXCIvaG9tZS9kL2NsaXByci9jbGlwYXJyLW5vZGUvc3JjL3V0aWxzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ZpbGVuYW1lID0gXCIvaG9tZS9kL2NsaXByci9jbGlwYXJyLW5vZGUvc3JjL3V0aWxzL2lzUG9ydEZyZWUuanNcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfaW1wb3J0X21ldGFfdXJsID0gXCJmaWxlOi8vL2hvbWUvZC9jbGlwcnIvY2xpcGFyci1ub2RlL3NyYy91dGlscy9pc1BvcnRGcmVlLmpzXCI7Ly8gc3JjL3V0aWxzL2lzUG9ydEZyZWUuanNcbmltcG9ydCBodHRwIGZyb20gJ2h0dHAnO1xuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gcG9ydCBpcyBhbHJlYWR5IGluIHVzZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBwb3J0XG4gKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzUG9ydEluVXNlKHBvcnQpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgY29uc3QgdGVzdGVyID0gaHR0cC5jcmVhdGVTZXJ2ZXIoKTtcbiAgICB0ZXN0ZXIub25jZSgnZXJyb3InLCAoKSA9PiByZXNvbHZlKHRydWUpKTtcbiAgICB0ZXN0ZXIub25jZSgnbGlzdGVuaW5nJywgKCkgPT5cbiAgICAgIHRlc3Rlci5jbG9zZSgoKSA9PiByZXNvbHZlKGZhbHNlKSksXG4gICAgKTtcbiAgICB0ZXN0ZXIubGlzdGVuKHBvcnQpO1xuICB9KTtcbn1cbiIsICJjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZGlybmFtZSA9IFwiL2hvbWUvZC9jbGlwcnIvY2xpcGFyci1ub2RlL3NyYy9pbnRlZ3JhdGlvblwiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9maWxlbmFtZSA9IFwiL2hvbWUvZC9jbGlwcnIvY2xpcGFyci1ub2RlL3NyYy9pbnRlZ3JhdGlvbi9zZXJ2ZXIuanNcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfaW1wb3J0X21ldGFfdXJsID0gXCJmaWxlOi8vL2hvbWUvZC9jbGlwcnIvY2xpcGFyci1ub2RlL3NyYy9pbnRlZ3JhdGlvbi9zZXJ2ZXIuanNcIjtpbXBvcnQgaHR0cCBmcm9tICdodHRwJztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uL3NlcnZpY2VzL2xvZ2dlci5qcyc7XG5pbXBvcnQgY29uZmlnIGZyb20gJy4uL2NvbmZpZy9pbmRleC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVBcHAgfSBmcm9tICcuLi9hcHAuanMnO1xuaW1wb3J0IHsgc2V0dXBXZWJTb2NrZXQsIGdldFdlYlNvY2tldFNlcnZlciB9IGZyb20gJy4uL3NlcnZpY2VzL3dlYnNvY2tldC5qcyc7XG5pbXBvcnQgeyBnZXREYXRhYmFzZVNpbmdsZXRvbiB9IGZyb20gJy4uL2RhdGFiYXNlL0F1dG9fREJfU2V0dXAuanMnO1xuaW1wb3J0IHsgaXNQb3J0SW5Vc2UgfSBmcm9tICcuLi91dGlscy9pc1BvcnRGcmVlLmpzJztcblxubGV0IHNlcnZlckluc3RhbmNlLCBkYkluc3RhbmNlO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3RhcnRTZXJ2ZXIoKSB7XG4gIGlmIChzZXJ2ZXJJbnN0YW5jZSkge1xuICAgIHJldHVybiBzZXJ2ZXJJbnN0YW5jZTtcbiAgfVxuICBpZiAoYXdhaXQgaXNQb3J0SW5Vc2UoY29uZmlnLnBvcnQpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBQb3J0ICR7Y29uZmlnLnBvcnR9IGluIHVzZWApO1xuICB9XG5cbiAgZGJJbnN0YW5jZSA9IGdldERhdGFiYXNlU2luZ2xldG9uKGNvbmZpZy5kYi5wYXRoKTtcbiAgY29uc3QgYXBwID0gY3JlYXRlQXBwKHsgZGI6IGRiSW5zdGFuY2UsIGxvZ2dlciwgd3NzOiBudWxsIH0pO1xuXG4gIHNlcnZlckluc3RhbmNlID0gaHR0cC5jcmVhdGVTZXJ2ZXIoYXBwKTtcbiAgc2V0dXBXZWJTb2NrZXQoc2VydmVySW5zdGFuY2UsIGNvbmZpZy53cyk7XG4gIGFwcC5zZXQoJ3dzcycsIGdldFdlYlNvY2tldFNlcnZlcigpKTtcblxuICBzZXJ2ZXJJbnN0YW5jZS5saXN0ZW4oY29uZmlnLnBvcnQsIGNvbmZpZy5ob3N0LCAoKSA9PlxuICAgIGxvZ2dlci5pbmZvKGBMaXN0ZW5pbmcgb24gJHtjb25maWcuaG9zdH06JHtjb25maWcucG9ydH1gKSxcbiAgKTtcbiAgcmV0dXJuIHNlcnZlckluc3RhbmNlO1xufVxuIiwgImNvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9kaXJuYW1lID0gXCIvaG9tZS9kL2NsaXByci9jbGlwYXJyLW5vZGVcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZmlsZW5hbWUgPSBcIi9ob21lL2QvY2xpcHJyL2NsaXBhcnItbm9kZS92aXRlLmNvbmZpZy50c1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9pbXBvcnRfbWV0YV91cmwgPSBcImZpbGU6Ly8vaG9tZS9kL2NsaXByci9jbGlwYXJyLW5vZGUvdml0ZS5jb25maWcudHNcIjtpbXBvcnQgeyBkZWZpbmVDb25maWcgfSBmcm9tICd2aXRlJztcbmltcG9ydCByZWFjdCBmcm9tICdAdml0ZWpzL3BsdWdpbi1yZWFjdCc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IGZpbGVVUkxUb1BhdGggfSBmcm9tICd1cmwnO1xuXG5jb25zdCBfX2Rpcm5hbWUgPSBwYXRoLmRpcm5hbWUoZmlsZVVSTFRvUGF0aChpbXBvcnQubWV0YS51cmwpKTtcblxuZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29uZmlnKHtcbiAgcGx1Z2luczogW1xuICAgIHJlYWN0KCksXG4gICAgLy8gUGx1Z2luIHRvIHN0YXJ0IGJhY2tlbmQgc2VydmVyIGFsb25nc2lkZSBWaXRlXG4gICAge1xuICAgICAgbmFtZTogJ2JhY2tlbmQtaW50ZWdyYXRpb24nLFxuICAgICAgY29uZmlndXJlU2VydmVyKCkge1xuICAgICAgICAvLyBTdGFydCB5b3VyIGJhY2tlbmQgc2VydmVyIHdoZW4gVml0ZSBzdGFydHNcbiAgICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgc3RhcnRTZXJ2ZXIgfSA9IGF3YWl0IGltcG9ydCgnLi9zcmMvaW50ZWdyYXRpb24vc2VydmVyLmpzJyk7XG4gICAgICAgICAgICBhd2FpdCBzdGFydFNlcnZlcigpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1x1MjcwNSBCYWNrZW5kIHNlcnZlciBzdGFydGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHUyNzRDIEZhaWxlZCB0byBzdGFydCBiYWNrZW5kIHNlcnZlcjonLCBlcnIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgMTAwMCk7IC8vIFNtYWxsIGRlbGF5IHRvIGxldCBWaXRlIHN0YXJ0IGZpcnN0XG4gICAgICB9XG4gICAgfVxuICBdLFxuICBzZXJ2ZXI6IHtcbiAgICBob3N0OiAnMC4wLjAuMCcsXG4gICAgcG9ydDogODQ4NCwgLy8gRnJvbnRlbmQgcG9ydFxuICAgIHdhdGNoOiB7XG4gICAgICBpZ25vcmVkOiBbJyoqL3NyYy9kYXRhYmFzZS9kYXRhLyoqJ10sIC8vIElnbm9yZSBEQiBjaGFuZ2VzXG4gICAgfSxcbiAgfSxcbiAgYnVpbGQ6IHtcbiAgICBvdXREaXI6ICdkaXN0JyxcbiAgICBzb3VyY2VtYXA6IHRydWUsXG4gIH0sXG4gIHJlc29sdmU6IHtcbiAgICBhbGlhczoge1xuICAgICAgJ0AnOiBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnLi9zcmMnKSxcbiAgICB9LFxuICB9LFxufSk7Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7QUFFQSxPQUFPLFVBQVU7QUFGakIsSUFJTSxRQUVPO0FBTmI7QUFBQTtBQUFBO0FBSUEsSUFBTSxTQUFTLFFBQVEsSUFBSSxhQUFhO0FBRWpDLElBQU0sU0FBUyxLQUFLO0FBQUEsTUFDekIsT0FBTyxRQUFRLElBQUksY0FBYyxT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QVFJLGdCQUFnQkM7QUFScEI7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBLElBQUFDO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTs7O0FDTm1RLFNBQVMsb0JBQW9CO0FBQ2hTLE9BQU8sV0FBVztBQUNsQixPQUFPQyxXQUFVO0FBQ2pCLFNBQVMscUJBQXFCO0FBSGdJLElBQU0sMkNBQTJDO0FBSy9NLElBQU1DLGFBQVlDLE1BQUssUUFBUSxjQUFjLHdDQUFlLENBQUM7QUFFN0QsSUFBTyxzQkFBUSxhQUFhO0FBQUEsRUFDMUIsU0FBUztBQUFBLElBQ1AsTUFBTTtBQUFBO0FBQUEsSUFFTjtBQUFBLE1BQ0UsTUFBTTtBQUFBLE1BQ04sa0JBQWtCO0FBRWhCLG1CQUFXLFlBQVk7QUFDckIsY0FBSTtBQUNGLGtCQUFNLEVBQUUsYUFBQUMsYUFBWSxJQUFJLE1BQU07QUFDOUIsa0JBQU1BLGFBQVk7QUFDbEIsb0JBQVEsSUFBSSw0Q0FBdUM7QUFBQSxVQUNyRCxTQUFTLEtBQUs7QUFDWixvQkFBUSxNQUFNLDBDQUFxQyxHQUFHO0FBQUEsVUFDeEQ7QUFBQSxRQUNGLEdBQUcsR0FBSTtBQUFBLE1BQ1Q7QUFBQSxJQUNGO0FBQUEsRUFDRjtBQUFBLEVBQ0EsUUFBUTtBQUFBLElBQ04sTUFBTTtBQUFBLElBQ04sTUFBTTtBQUFBO0FBQUEsSUFDTixPQUFPO0FBQUEsTUFDTCxTQUFTLENBQUMseUJBQXlCO0FBQUE7QUFBQSxJQUNyQztBQUFBLEVBQ0Y7QUFBQSxFQUNBLE9BQU87QUFBQSxJQUNMLFFBQVE7QUFBQSxJQUNSLFdBQVc7QUFBQSxFQUNiO0FBQUEsRUFDQSxTQUFTO0FBQUEsSUFDUCxPQUFPO0FBQUEsTUFDTCxLQUFLRCxNQUFLLFFBQVFELFlBQVcsT0FBTztBQUFBLElBQ3RDO0FBQUEsRUFDRjtBQUNGLENBQUM7IiwKICAibmFtZXMiOiBbImlzUHJvZCIsICJjb25maWciLCAibG9nZ2VyIiwgImV4cHJlc3MiLCAicm91dGVyIiwgImxvZ2dlciIsICJleHByZXNzIiwgImRvdGVudiIsICJwcm9jZXNzIiwgInJvdXRlciIsICJwYXRoIiwgImV4cHJlc3MiLCAicm91dGVyIiwgImV4cHJlc3MiLCAibG9nZ2VyIiwgImluaXRfYXBwIiwgInBhdGgiLCAiaHR0cCIsICJkYkluc3RhbmNlIiwgImluaXRfYXBwIiwgInBhdGgiLCAiX19kaXJuYW1lIiwgInBhdGgiLCAic3RhcnRTZXJ2ZXIiXQp9Cg==
